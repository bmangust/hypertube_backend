(this["webpackJsonpfront-react"]=this["webpackJsonpfront-react"]||[]).push([[0],{184:function(e,t,a){e.exports=a(264)},195:function(e,t,a){},264:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(19),o=a.n(i),c=a(23),l=a(5),s=(a(195),a(8)),u=a(375),m=a(330),d=a(321),f=a(319),p=a(374),g=a(314),h="#fafafa",b="#fdfdfd",v={light:"#A8DADC",main:"#457B9D",dark:"#1D3557",contrastText:"#000",contrastTextLighter:"#777"},E={light:"#E94957",main:"#E63946",dark:"#C81927",contrastText:"#fff"},y=Object(g.a)({palette:{primary:v,secondary:E,info:{main:"#04728B"}},overrides:{MuiTextField:{root:{width:"100%"}},MuiContainer:{root:{display:"flex",justifyContent:"center"}},MuiBadge:{anchorOriginTopRightCircle:{top:"23%",right:"33%",transform:"scale(1.5) translate(50%, -50%)",border:"1px solid ".concat(b)}}},shape:{borderRadius:"30px"},props:{MuiButton:{variant:"outlined",color:"primary",size:"large"},MuiTextField:{variant:"outlined"},MuiAlert:{elevation:6,variant:"filled"}}}),x=a(25),O=a(63),j=a(7),w=a.n(j),k=a(13),C=a(16),S=a(28),N=a(57),T=a.n(N),I=T.a.CancelToken,L=T.a.create({baseURL:"/api/main/",withCredentials:!0,headers:{"Content-Type":"application/json"},validateStatus:function(e){return e>=200&&e<500}}),A=T.a.create({baseURL:"/api/media/",withCredentials:!0,headers:{"Content-Type":"application/json"},responseType:"blob",validateStatus:function(e){return e>=200&&e<500}}),U=T.a.create({baseURL:"/api/chat/",withCredentials:!0,headers:{"Content-Type":"application/json"},validateStatus:function(e){return e>=200&&e<500}}),D=function(){var e=Object(k.a)(w.a.mark((function e(t,a){var n,r,i,o=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>2&&void 0!==o[2]&&o[2],(r=new FormData).append("id",t),r.append("isAvatar",n),r.append("userImage",a),e.next=7,T.a.post("/api/media/upload/",r,{headers:{"Content-Type":"multipart/form-data"}});case 7:return i=e.sent,e.abrupt("return",i);case 9:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),V=a(10),M=function(e){return e?e.toString().replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&#34;"):""},B=function(e){var t=[/&lt;/g,"<"],a=[/&gt;/g,">"],n=[/&#39;/g,"'"],r=[/&#34;/g,'"'];return e?e.replace(t[0],t[1]).replace(a[0],a[1]).replace(n[0],n[1]).replace(r[0],r[1]):""},F=I.source(),R=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,i,o;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((a=t.images)&&0!==a.length){e.next=3;break}return e.abrupt("return",Object(V.a)(Object(V.a)({},t),{},{images:[]}));case 3:return e.prev=3,n=a.map((function(e){return A("img/".concat(e),{cancelToken:F.token})})),e.next=7,Promise.allSettled(n);case 7:return r=e.sent,i=r.filter((function(e){return"fulfilled"===e.status})).map((function(e){var t=URL.createObjectURL(e.value.data);return{id:e.value.config.url.split("/")[1],image:t}})),(o=Object(V.a)(Object(V.a)({},t),{},{images:i})).avatar=o.images.find((function(e){return e.id===t.avatar})),e.abrupt("return",o);case 14:return e.prev=14,e.t0=e.catch(3),T.a.isCancel(e.t0)&&console.log("Request cancelled"),e.abrupt("return",t);case 18:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t){return e.apply(this,arguments)}}(),W=function(e){var t=(new Date).getFullYear()-new Date(e.birthDate).getFullYear();return Object(V.a)(Object(V.a)({},e),{},{age:t})},P=function(e){return e.map((function(e){return W(e)})).map((function(e){return R(e)}))},_=function(e){var t=document.cookie;console.log(t);var a=t.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)")),n=a?decodeURIComponent(a[1]):void 0;return void 0===n&&(n=t.split(";").find((function(e){return e.match(/session_id.+/)})))&&(n=n.split("=")[1].trim()),n},z=a(28),G=z.createSlice,H={chat:null,chats:[]},$=G({name:"chat",initialState:H,reducers:{setChats:function(e,t){var a=t.payload;a&&a.length&&(e.chats=a.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{messages:e.messages||[]})})))},addChat:function(e,t){var a=t.payload;e.chats.find((function(e){return e.id===a.id}))||e.chats.push(Object(V.a)(Object(V.a)({},a),{},{messages:a.messages||[]}))},deleteChat:function(e,t){var a,n=t.payload;e.chats=null===(a=e.chats)||void 0===a?void 0:a.filter((function(e){return e.id!==n.id}))},setChat:function(e,t){var a=t.payload;if(e.chats.length)if(a){var n=e.chats.find((function(e){return e.id===a.id}));e.chat=n?n.id:null}else e.chat=null},setChatByUserId:function(e,t){var a=t.payload;if(a&&0!==e.chats.length){var n=e.chats.find((function(e){return e.userIds.includes(a.id)}));e.chat=n&&n.id}},addMessage:function(e,t){var a=t.payload;if(a){var n=e.chats.findIndex((function(e){return e.id===a.chatId}));n<0||e.chats[n].messages.find((function(e){return e.id===a.id}))||e.chats[n].messages.push(a)}},updateMessage:function(e,t){var a,n=t.payload,r=e.chat||(null===(a=e.chats.find((function(e){return e.id===n.chatId})))||void 0===a?void 0:a.id);if(r){var i=e.chats.findIndex((function(e){return e.id===r})),o=e.chats[i].messages.findIndex((function(e){return e.id===n.id}));console.log("chatIdx: ".concat(i,", msgIdx: ").concat(o)),-1===o?e.chats[i].messages.push(n):(e.chats[i].messages[o].text=n.text,e.chats[i].messages[o].status=n.status)}},deleteMessage:function(e,t){var a,n=t.payload,r=e.chat||(null===(a=e.chats.find((function(e){return e.id===n.chatId})))||void 0===a?void 0:a.id),i=e.chats.findIndex((function(e){return e.id===r})),o=e.chats[i].messages.findIndex((function(e){return e.id===n.id}));-1!==o&&e.chat.messages.slpice(o,1)},upadateChatMessages:function(e,t){var a=t.payload;if(e.chat){var n=e.chats.findIndex((function(t){return t.id===e.chat}));e.chats[n].messages=a}},resetState:function(){return H}}}),K=$.actions,q=K.setChat,Y=K.setChats,J=K.setChatByUserId,Z=K.deleteChat,X=K.addChat,Q=(K.resetState,K.addMessage),ee=K.updateMessage,te=K.deleteMessage,ae=(K.upadateChatMessages,$.reducer),ne={showBackButton:!1,header:null,selectedTab:null,companion:null,isInfoMissing:!1,parent:"/"},re=Object(S.createSlice)({name:"UI",initialState:ne,reducers:{showBackButton:function(e){e.showBackButton=!0},hideBackButton:function(e){e.showBackButton=!1},setSelectedTab:function(e,t){var a=t.payload;e.selectedTab=a.selectedTab,e.header=a.selectedTab.label,e.companion=null},setHeader:function(e,t){var a=t.payload;e.header=a.header},resetUIState:function(){return ne},setCompanion:function(e,t){var a=t.payload;e.companion=a.companion},setIsInfoMissing:function(e,t){var a=t.payload;e.isInfoMissing=a},setParent:function(e,t){var a=t.payload;e.parent=a.parent}}}),ie=re.actions,oe=ie.showBackButton,ce=ie.hideBackButton,le=ie.setSelectedTab,se=ie.setHeader,ue=ie.resetUIState,me=ie.setCompanion,de=ie.setIsInfoMissing,fe=ie.setParent,pe=function(e,t){return function(a,n){var r=n().UI.parent;a(ce()),a(se({header:t})),a(me({companion:null})),a(q(null)),"strangers"===r?e.push("/"):e.push("/".concat(r))}},ge=function(e){return function(t,a){try{L.post("/like",{id:e});var n=a().general.likes,r=[].concat(Object(C.a)(n),[e]);t(Oa({likes:r}))}catch(i){console.log(i)}}},he=function(e){return function(t,a){try{L.delete("/like/".concat(e));var n=a().general,r=n.likes,i=n.matches,o=n.likedBy,c=r.filter((function(t){return t!==e})),l=i.includes(e)?[].concat(Object(C.a)(o),[e]):o;t(Oa({likes:c,likedBy:l}))}catch(s){console.log(s)}}},be=re.reducer,ve=a(28),Ee=ve.createSlice,ye={username:"",city:"",country:"",gender:"",tags:[],age:{minAge:0,maxAge:100},rating:{min:0,max:1}},xe=Ee({name:"filter",initialState:ye,reducers:{changeFilterState:function(e,t){var a=t.payload;for(var n in a)if(["username","city","country","gender","tags"].includes(n))e[n]="tags"===n?a[n].value:a[n];else if("age"===n)e.age.minAge=a.age[0],e.age.maxAge=a.age[1];else{if("rating"!==n)throw new Error("Key <<".concat(n,">> is not allowed"));e.rating.min=a.rating[0],e.rating.max=a.rating[1]}},resetFilter:function(e){Object(V.a)({},ye)}}}),Oe=xe.actions,je=Oe.changeFilterState,we=Oe.resetFilter,ke=xe.reducer,Ce=a(28),Se=Ce.createSlice,Ne={id:"",email:"",name:"",surname:"",username:"",bio:"",birthDate:0,gender:"",phone:"",country:"",city:"",maxDist:0,lookFor:"",minAge:0,maxAge:100,tags:null,useLocation:!1,emailValid:!1,usernameValid:!1,nameValid:!1,surnameValid:!1,bioValid:!1,countryValid:!1,cityValid:!1,updateSuccess:!1},Te=Se({name:"additional",initialState:Ne,reducers:{setAdditionalState:function(e,t){var a=t.payload;Object.keys(a).forEach((function(t){if(["name","surname","bio","country","city"].includes(t)){var n=a[t]||Ne[t];e[t]=B(n)}else e[t]=a[t]||Ne[t]}))},resetAdditionalState:function(){return Ne},changeEmail:function(e,t){var a=t.payload;e.email=a},changeUsername:function(e,t){var a=t.payload;e.username=a},changeName:function(e,t){var a=t.payload;e.name=a},changeSurname:function(e,t){var a=t.payload;e.surname=a},changeBio:function(e,t){var a=t.payload;e.bio=a},changeBirthDate:function(e,t){var a=t.payload,n=new Date(a).getTime();isNaN(n)||(e.birthDate=n)},changeGender:function(e,t){var a=t.payload;e.gender=a},changePhone:function(e,t){var a=t.payload;e.phone=a},changeCountry:function(e,t){var a=t.payload;e.country=a},changeCity:function(e,t){var a=t.payload;e.city=a},changeMaxDist:function(e,t){var a=t.payload;e.maxDist=+a},changeLookFor:function(e,t){var a=t.payload;e.lookFor=a},changeSearchAgeRange:function(e,t){var a=t.payload;e.minAge=a[0],e.maxAge=a[1]},changeMinAge:function(e,t){var a=t.payload;e.minAge=a},changeMaxAge:function(e,t){var a=t.payload;e.maxAge=a},changeTags:function(e,t){var a=t.payload.value;e.tags=a},changeUseLocation:function(e,t){var a=t.payload;e.useLocation=a},changeEmailValid:function(e,t){var a=t.payload;e.emailValid=a},changeUsernameValid:function(e,t){var a=t.payload;e.usernameValid=a},changeNameValid:function(e,t){var a=t.payload;e.nameValid=a},changeSurnameValid:function(e,t){var a=t.payload;e.surnameValid=a},changeBioValid:function(e,t){var a=t.payload;e.bioValid=a},changePhoneValid:function(e,t){var a=t.payload;e.phoneValid=a},changeCountryValid:function(e,t){var a=t.payload;e.countryValid=a},changeCityValid:function(e,t){var a=t.payload;e.cityValid=a},onUpdateSuccess:function(e){e.updateSuccess=!0},onUpdateFail:function(e){e.updateSuccess=!1}}}),Ie=Te.actions,Le=Ie.setAdditionalState,Ae=(Ie.resetAdditionalState,Ie.changeEmail),Ue=Ie.changeUsername,De=Ie.changeName,Ve=Ie.changeSurname,Me=Ie.changeBio,Be=Ie.changeBirthDate,Fe=Ie.changeGender,Re=Ie.changePhone,We=Ie.changeCountry,Pe=Ie.changeCity,_e=Ie.changeMaxDist,ze=Ie.changeLookFor,Ge=Ie.changeSearchAgeRange,He=Ie.changeTags,$e=Ie.changeUseLocation,Ke=Ie.changeEmailValid,qe=Ie.changeUsernameValid,Ye=Ie.changeNameValid,Je=Ie.changeSurnameValid,Ze=Ie.changeBioValid,Xe=Ie.changePhoneValid,Qe=Ie.changeCountryValid,et=Ie.changeCityValid,tt=Ie.onUpdateSuccess,at=Ie.onUpdateFail,nt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.id,n=t.username,r=t.name,i=t.surname,o=t.bio,c=t.birthDate,l=t.phone,s=t.gender,u=t.country,m=t.city,d=t.maxDist,f=t.lookFor,p=t.minAge,g=t.maxAge,h=t.tags,b=t.useLocation,v=arguments.length>1?arguments[1]:void 0;return function(){var t=Object(k.a)(w.a.mark((function t(E,y){var x,O,j,k,S,N;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(x=y().additional,O=y().general,j={id:a||x.id,username:n||x.username,name:M(r)||x.name,surname:M(i)||x.surname,bio:M(o)||x.bio,phone:l||x.phone,birthDate:c||x.birthDate,gender:s||x.gender,country:M(u)||x.country,city:M(m)||x.city,maxDist:d||x.maxDist,lookFor:f||x.lookFor,minAge:p||x.minAge,maxAge:g||x.maxAge,useLocation:b||x.useLocation},0!==O.position.lat&&0!==O.position.lon&&(j.position=O.position),j.id){t.next=7;break}return setTimeout((function(){return E(e(j))}),1e3),t.abrupt("return");case 7:return t.prev=7,x.email!==O.email&&L.put("email/change",{email:x.email}),t.next=11,L.put("account",j);case 11:if(S=t.sent,!h||!h.length){t.next=18;break}return t.next=15,L.put("tag",{tags:Object(C.a)(h)});case 15:N=t.sent,console.log("TAGS",N),N.data.status&&E(Oa({tags:h}));case 18:if(console.log(S.data.data),!S.data.status){t.next=26;break}return E(Oa(j)),E(tt()),v&&v("Successfully saved!","success"),t.abrupt("return");case 26:k=S.data;case 27:t.next=33;break;case 29:t.prev=29,t.t0=t.catch(7),console.log(t.t0),k="Server error";case 33:v&&v(k,"error"),E(at());case 35:case"end":return t.stop()}}),t,null,[[7,29]])})));return function(e,a){return t.apply(this,arguments)}}()},rt=Te.reducer,it=a(158),ot=a(56),ct=a(64),lt=a(75),st={CHAT:"CHAT",MESSAGE:"MESSAGE",UPDATE:"UPDATE"},ut={NEW_CHAT:"NEW_CHAT",DELETE_CHAT:"DELETE_CHAT"},mt={USER_STATUS_UPDATE:"USER_STATUS_UPDATE",NEW_LIKE:"NEW_LIKE",NEW_LOOK:"NEW_LOOK",NEW_MATCH:"NEW_MATCH",DELETE_MATCH:"DELETE_MATCH",DELETE_LIKE:"DELETE_LIKE"},dt={NEW:"UPDATE_STATUS_NEW",READ:"UPDATE_STATUS_READ"},ft={NEW_MESSAGE:"NEW_MESSAGE",UPDATE_MESSAGE:"UPDATE_MESSAGE",DELETE_MESSAGE:"DELETE_MESSAGE"},pt={STATUS_NEW:"STATUS_NEW",STATUS_DELIVERED:"STATUS_DELIVERED",STATUS_READ:"STATUS_READ"},gt=function e(t){var a=t.type,n=t.payload;Object(ct.a)(this,e),this.type=a,this.payload=n||null},ht=function e(t){var a=t.id,n=t.userIds,r=t.messages;Object(ct.a)(this,e),this.id=a||"",this.userIds=n,this.messages=r||[]},bt=function e(t){var a=t.id,n=t.sender,r=t.recipient,i=t.date,o=t.text,c=t.chatId,l=t.status;Object(ct.a)(this,e),this.id=a||Object(lt.v4)(),this.chatId=c||"",this.sender=n,this.recipient=r,this.date=i||(new Date).getTime(),this.text=o||"",this.status=l},vt=function(){function e(t){var a=t.id,n=t.userId,r=t.type;Object(ct.a)(this,e),this.id=a||Object(lt.v4)(),this.date=(new Date).getTime(),this.userId=n,this.type=r,this.status=dt.NEW}return Object(ot.a)(e,[{key:"equals",value:function(e){return this.id===e.id&&this.userId===e.userId&&this.type===e.type}}]),e}(),Et={isLoading:!1,isUpdating:!1,error:null,users:[],strangers:[],banned:null},yt=new Set,xt=Object(S.createSlice)({name:"users",initialState:Et,reducers:{startLoading:function(e){e.isLoading=!0},successLoading:function(e){e.isLoading=!1},failLoading:function(e,t){var a=t.payload;e.isLoading=!1,e.error=a},addUsers:function(e,t){var a=t.payload,n=Object(C.a)(a);n.length&&n.forEach((function(t){0===Object.keys(t).length||e.users.find((function(e){return e.id===t.id}))||e.users.push(t)}))},updateUsers:function(e,t){var a=t.payload,n=Object(C.a)(a);n.length&&n.forEach((function(t){var a=e.users.find((function(e){return t.id===e.id}));a?Object.keys(t).forEach((function(e){"lastOnline"===e&&t[e]>a[e]||"isOnline"===e&&a[e]||(a[e]=t[e])})):e.users.push(t)}))},setUsersOnline:function(e,t){var a=t.payload,n=Object(C.a)(a);n.length&&n.forEach((function(t){var a=e.users.find((function(e){return t.id===e.id}));a&&(a.isOnline=t.isOnline)}))},sortStrangers:function(e,t){var a=t.payload,n=Object(V.a)({},a).compareFunction;e.strangers.sort(n)},updateStrangers:function(e,t){var a=t.payload,n=Object(C.a)(a);n.length&&n.forEach((function(t){var a=e.strangers.find((function(e){return t.id===e.id}));a&&Object.keys(t).forEach((function(e){a[e]=t[e]}))}))},setUsers:function(e,t){var a=t.payload;e.users=a},setStrangers:function(e,t){var a=t.payload;e.strangers=Object(C.a)(a)},setBanned:function(e,t){var a=t.payload;e.banned=a},startUpdating:function(e){e.isUpdating=!0},successUpdating:function(e){e.isUpdating=!1},failUpdating:function(e,t){var a=t.payload;e.isUpdating=!1,e.error=a},resetError:function(e){e.error=null},resetUsersState:function(){return Et}}}),Ot=function(e){return e.map((function(e){return e.id}))},jt=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n,r,i=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:{},n=Object.entries(a).reduce((function(e,t){var a=Object(s.a)(t,2),n=a[0],r=a[1];if("tags"===n){if(!r||0===r.length)return e;var i=r.reduce((function(e,t){return"".concat(t,",").concat(e)}));return e[n]=i,e}return"age"===n?Object(V.a)(Object(V.a)({},e),{},{minAge:r.minAge,maxAge:r.maxAge}):"gender"===n?(e[n]=r,e):(""!==r&&"username"!==n&&(e[n]=r),e)}),{}),e.prev=2,e.next=5,L.get("strangers",{params:n});case 5:if(!(r=e.sent).data.status){e.next=10;break}return e.abrupt("return",r.data.data||[]);case 10:if(t(r.data.data,"error"),"incorrect session id"!==r.data.data){e.next=13;break}return e.abrupt("return",null);case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),t("Server error","error"),console.log(e.t0);case 19:return e.abrupt("return",[]);case 20:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),wt=function(e,t){return function(){var a=Object(k.a)(w.a.mark((function a(n,r){var i,o,c,l,s;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(Tt()),St(n),a.next=4,jt(e,t);case 4:if(i=a.sent){a.next=10;break}return n(ga()),n(Rt()),n(ue()),a.abrupt("return");case 10:return n(It()),n(Bt()),i=i.map((function(e){return W(e)})),n(Mt(i)),n(Lt(i)),u=i,o=0===yt.length?u:u.filter((function(e){return!yt.has(e.id)})),a.next=18,Promise.all(P(o));case 18:c=a.sent,n(Ut(c)),l=r().users.users,s=i.map((function(e){return l.find((function(t){return t.id===e.id}))})).filter((function(e){return null!==e})),Ot(s).forEach((function(e){return yt.add(e)})),n(Mt(s)),n(Ft());case 25:case"end":return a.stop()}var u}),a)})));return function(e,t){return a.apply(this,arguments)}}()},kt=function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){var n,r,i,o,c,l;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return n=Object(C.a)(e).filter((function(e){return!yt.has(e)})),t.prev=3,r=n.map((function(e){return L("/data/".concat(e))})),t.next=7,Promise.allSettled(r);case 7:return i=t.sent,o=i.filter((function(e){return"fulfilled"===e.status})).filter((function(e){return e.value.data.status})).map(function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R(t.value.data.data);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),t.next=11,Promise.all(o);case 11:if(c=t.sent,(l=c.map((function(e){return e&&W(e)}))).length){t.next=15;break}return t.abrupt("return");case 15:Ot(l).forEach((function(e){return yt.add(e)})),a(Ut(l)),t.next=23;break;case 19:throw t.prev=19,t.t0=t.catch(3),console.log(t.t0),new Error("Fetching users failed");case 23:case"end":return t.stop()}}),t,null,[[3,19]])})));return function(e){return t.apply(this,arguments)}}()},Ct=function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a,n){var r,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n().users.users,i=[],e.forEach((function(e){var t=r.find((function(t){return t.id===e.id}));t&&t.username||i.push(e.id)})),i.length&&a(kt(i)),a(Ut(e)),a(Dt(e));case 6:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},St=function(){var e=Object(k.a)(w.a.mark((function e(t){var a,n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L("ban");case 3:(a=e.sent).data.status&&(n=a.data.data||[],t(kt(n)),t(At(n))),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Nt=xt.actions,Tt=Nt.startLoading,It=Nt.successLoading,Lt=Nt.addUsers,At=(Nt.setUsers,Nt.setBanned),Ut=Nt.updateUsers,Dt=Nt.updateStrangers,Vt=(Nt.setUsersOnline,Nt.sortStrangers),Mt=Nt.setStrangers,Bt=(Nt.failLoading,Nt.startUpdating),Ft=Nt.successUpdating,Rt=(Nt.failUpdating,Nt.resetError,Nt.resetUsersState),Wt=xt.reducer,Pt={notifications:[]},_t=Object(S.createSlice)({name:"WS",initialState:Pt,reducers:{resetWSSlice:function(){return Pt},addNotification:function(e,t){var a=t.payload;if(!a.notification)throw new Error("No notification in payload");if(!a.notification.id)throw new Error("No id in payload");e.notifications.length&&e.notifications.some((function(e){return e.id===a.notification.id&&e.userId===a.notification.userId&&e.type===a.notification.type}))||e.notifications.push(new vt(a.notification))},removeNotification:function(e,t){var a=t.payload,n=-1;if(!a.notification)throw new Error("No notification in payload");if(a.notification.id)n=e.notifications.findIndex((function(e){return e.equals(a.notification)}));else{if(!a.notification.userId||!a.notification.type)throw new Error("No type and userId in payload");n=e.notifications.findIndex((function(e){return e.userId===a.notification.userId&&e.type===a.notification.type}))}-1!==n&&(e.notifications=e.notifications.filter((function(e,t){return t!==n})))},readNotification:function(e,t){var a=t.payload;if(!a.id)throw new Error("No id in payload");var n=e.notifications.findIndex((function(e){return e.id===a.id}));if(-1!==n){var r=e.notifications[n];r.status=dt.READ;var i=e.notifications.slice(0,n).concat(r).concat(e.notifications.slice(n+1));e.notifications=i}},readAllNotifications:function(e){e.notifications=e.notifications.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{status:dt.READ})}))}}}),zt=_t.actions,Gt=(zt.resetWSSlice,zt.addNotification),Ht=zt.removeNotification,$t=zt.readNotification,Kt=zt.readAllNotifications,qt=_t.reducer,Yt=(0,a(28).createSlice)({name:"snack",initialState:{notifications:[]},reducers:{addSnack:function(e,t){var a=t.payload;e.notifications.push(a)},dismissSnack:function(e,t){var a=t.payload;e.notifications=e.notifications.map((function(e){return a.dismissAll||e.key===a.key?Object(V.a)(Object(V.a)({},e),{},{dismissed:!0}):e}))},removeSnack:function(e,t){var a=t.payload;e.notifications=e.notifications.filter((function(e){return e.key!==a.key}))}}}),Jt=Object(V.a)({},Yt.actions),Zt=Jt.addSnack,Xt=(Jt.dismissSnack,Jt.removeSnack),Qt=Yt.reducer,ea=function(){var e=Object(l.b)();return{notif:function(t,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(Zt({key:Object(lt.v4)(),text:t.text||t,header:t.header,variant:a||"default",options:Object(V.a)(Object(V.a)({},n),{},{autoHideDuration:3e3})}))},handleNotification:function(t){if(console.log("[useNotifications] handleNotification",t),t.type===mt.NEW_LIKE||t.type===mt.NEW_LOOK||t.type===mt.NEW_MATCH||t.type===mt.DELETE_MATCH||t.type===mt.DELETE_LIKE){var a=new vt({type:t.type,userId:t.payload.userId});e(Gt({notification:a})),e(Ct([{id:t.payload.userId}]))}switch(t.type){case mt.NEW_LIKE:return console.log("[useNotifications] NEW_LIKE",t),void e(ba({key:"likedBy",values:[t.payload.userId]}));case mt.NEW_LOOK:return void e(ba({key:"lookedBy",values:[t.payload.userId]}));case mt.NEW_MATCH:return e(ba({key:"matches",values:[t.payload.userId]})),void e(va({key:"likedBy",values:[t.payload.userId]}));case mt.DELETE_LIKE:return void e(va({key:"likedBy",values:[t.payload.userId]}));case mt.DELETE_MATCH:return void e(va({key:"matches",values:[t.payload.userId]}));default:return}},showPrompt:function(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e(Zt({key:"message_"+Object(lt.v4)(),text:t.text||t,header:t.header,variant:"prompt",options:Object(V.a)(Object(V.a)({},a),{},{persist:!0})}))}}},ta=function(){var e=Object(l.c)((function(e){return e.general.id})),t=Object(l.b)(),a=Object(l.c)((function(e){return e.chat})).chat,n=ea().notif,r=Object(l.d)(),i=function(){var a=Object(k.a)(w.a.mark((function a(){var n;return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,U("chats",{params:{id:e}});case 3:(n=a.sent).data.status&&t(Y(n.data.data)),a.next=9;break;case 7:a.prev=7,a.t0=a.catch(0);case 9:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(){return a.apply(this,arguments)}}(),o=function(){var t=Object(k.a)(w.a.mark((function t(a){var r,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new ht({userIds:[a,e]}),t.prev=1,t.next=4,U.post("chat",r);case 4:if(!(o=t.sent).data.status){t.next=8;break}return t.next=8,i();case 8:return t.abrupt("return",o.data.data);case 11:return t.prev=11,t.t0=t.catch(1),n("Server error when creating chat","error"),t.abrupt("return",null);case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}();return{getChatsInfo:i,createChat:o,selectChat:function(e){t(J({id:e}))},handleChat:function(e){console.log("[hadleChat]",e),e.type===ut.NEW_CHAT?t(X(e.payload)):e.type===ut.DELETE_CHAT&&t(Z(e.payload))},handleMessage:function(e){if(e.type===ft.NEW_MESSAGE){var a=new vt({type:e.type,userId:e.payload.sender});t(Gt({notification:a})),t(Ct([{id:e.payload.userId}])),t(Q(e.payload)),function(e){var t,a=null===(t=r.getState().users)||void 0===t?void 0:t.users,i=window.location.pathname.match(e.chatId);if(!i||""===i[0]){var o=a&&a.find((function(t){return t.id===e.sender})),c=o?"".concat(o.username):"new message";n({header:c,text:e.text})}}(e.payload)}else e.type===ft.UPDATE_MESSAGE?t(ee(e.payload)):e.type===ft.DELETE_MESSAGE&&t(te(e.payload))},newMsg:function(t,n){var r=new bt({chatId:a,sender:e,recipient:t,text:n,status:pt.STATUS_NEW}),i=new gt({type:ft.NEW_MESSAGE,payload:r});ca(st.MESSAGE,i)},readMsg:function(e){var a=Object(V.a)(Object(V.a)({},e),{},{status:pt.STATUS_READ});t(ee(a)),t(Ht({notification:{userId:a.sender,type:ft.NEW_MESSAGE}}));var n=new gt({type:ft.UPDATE_MESSAGE,payload:a});ca(st.MESSAGE,n)},updateMsg:function(e){var t=Object(V.a)(Object(V.a)({},e),{},{status:pt.STATUS_READ}),a=new gt({type:ft.UPDATE_MESSAGE,payload:t});ca(st.MESSAGE,a)}}},aa="http:"===window.location.protocol?"ws":"wss",na="localhost:3000"===window.location.host?"".concat(aa,"://localhost:8080"):"".concat(aa,"://"),ra=null,ia=function(e){return Object(it.io)(na,{path:"/api/socket/connect",withCredentials:!0,reconnection:!1,query:{auth:e}})},oa=function(){var e=Object(l.c)((function(e){return e.general.id})),t=ta(),a=t.handleMessage,r=t.handleChat,i=ea().handleNotification,o=function(){var e=Object(l.d)(),t=Object(l.b)();return{getOnlineUsers:function(){var t,a=null===(t=e.getState().users)||void 0===t?void 0:t.users;return a?a.filter((function(e){return e.isOnline})):[]},updateOnline:function(a){var n=a.userId,r=a.isOnline,i={id:n,isOnline:r,lastOnline:(new Date).getTime()};t(Ct([i]));var o=e.getState().UI.companion;o&&o.id===n&&t(me({companion:Object(V.a)(Object(V.a)({},o),{},{isOnline:r})}))}}}().updateOnline;return Object(n.useEffect)((function(){(ra=ia(e)).on("connect",(function(){console.log("[open] \u0421\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u0443\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u043e"),ra.disconnected&&console.log("socket disconnected")})),ra.on(st.CHAT,(function(e){var t=JSON.parse(e);r(t)})),ra.on(st.MESSAGE,(function(e){var t=JSON.parse(e);a(t)})),ra.on(st.UPDATE,(function(e){var t=JSON.parse(e);t.type===mt.USER_STATUS_UPDATE?o(t.payload):i(t)})),ra.onAny((function(e){console.log("got ".concat(e));for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];console.log(a)})),ra.on("disconnect",(function(e){console.log("[disconnect] ".concat(e)),"io client disconnect"!==e&&ra.connect()})),ra.on("close",(function(e){console.log("[close] ".concat(e))})),ra.on("error",(function(e){console.log(e),ra.connect()}))}),[]),ra},ca=function(e,t){console.log(JSON.stringify(t)),ra.emit(e,JSON.stringify(t))},la={isAuth:!1,isLoading:!1,id:"",email:"",phone:"",name:"",surname:"",username:"",bio:"",birthDate:0,gender:"",country:"",city:"",maxDist:0,lookFor:"",minAge:0,maxAge:0,images:[],avatar:null,useLocation:null,likedBy:[],matches:[],likes:[],position:{lat:0,lon:0}},sa=Object(S.createSlice)({name:"general",initialState:la,reducers:{startLoading:function(e){e.isLoading=!0},stopLoading:function(e){e.isLoading=!1},authSuccess:function(e){e.isAuth=!0,e.isLoading=!1},authFail:function(e){e.isAuth=!1,e.isLoading=!1},resetGeneralState:function(e){return e.images&&e.images.forEach((function(e){return URL.revokeObjectURL(e.image)})),la},setNewState:function(e,t){var a=t.payload;Object.keys(a).forEach((function(t){"position"===t?(a.position.lat&&(e.position.lat=a.position.lat),a.position.lon&&(e.position.lon=a.position.lon)):"images"===t&&a.images?e.images=Object(C.a)(a.images):["name","surname","bio","country","city"].includes(t)?e[t]=B(a[t]):e[t]=a[t]}))},addGeneralValues:function(e,t){var a=t.payload;if(console.log(a),!a.key||!a.values)throw new Error("[addGeneralValues] no key or value in payload");var n=e[a.key],r=[].concat(Object(C.a)(n),Object(C.a)(a.values));e[a.key]=Object(C.a)(new Set(r))},removeGeneralValues:function(e,t){var a=t.payload;if(console.log(a),!a.key||!a.values)throw new Error("[addGeneralValues] no key or value in payload");e[a.key]=e[a.key].filter((function(e){return!a.values.includes(e)}))||[]}}}),ua=sa.actions,ma=ua.startLoading,da=ua.stopLoading,fa=ua.authSuccess,pa=ua.authFail,ga=ua.resetGeneralState,ha=ua.setNewState,ba=ua.addGeneralValues,va=ua.removeGeneralValues,Ea=function(){var e=Object(k.a)(w.a.mark((function e(t,a){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a(Oa(t.data)),a(fa()),a(Le(t.data)),e.prev=3,e.next=6,Promise.resolve(P([t.data])[0]);case 6:return n=e.sent,e.next=9,L.get("like");case 9:r=e.sent,n.likes=r.data.status?r.data.data:[],n&&(a(Oa(n)),a(Le(n))),e.next=16;break;case 14:e.prev=14,e.t0=e.catch(3);case 16:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,a){return e.apply(this,arguments)}}(),ya=function(e){var t=!1,a=!1;return Object.keys(e).forEach((function(n){-1===["tags","position","lookedBy","likedBy","matches","avatar","images","useLocation"].indexOf(n)&&("minAge"===n||"maxAge"===n?a=e.maxAge===la.maxAge&&e.minAge===la.minAge:t=t||e[n]===la[n])})),t||a},xa=function(){return function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,_("session_id")){e.next=3;break}return e.abrupt("return");case 3:return t(ma()),e.next=6,L("account");case 6:if(!(a=e.sent).data.status){e.next=12;break}return e.next=10,Ea(a.data,t);case 10:e.next=13;break;case 12:t(pa());case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),t(pa());case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(t){return e.apply(this,arguments)}}()},Oa=function(e){return function(t){var a=ya(e);t(de(a)),t(ha(e))}},ja=function(e,t,a){return function(){var n=Object(k.a)(w.a.mark((function n(r,i){var o,c,l,s;return w.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(ma()),o=i().general.position,n.prev=2,c=e.match(/([\w%+-.]+)@([\w-]+\.)+([\w]{2,})/i)?{email:M(e),password:M(t)}:{username:M(e),password:M(t)},o.lat&&(c.useLocation=!0),l=0===o.lat||0===o.lon?{}:{headers:{latitude:o.lat,longitude:o.lon}},n.next=8,L.post("/signin",c,l);case 8:(s=n.sent).data.status?Ea(s.data,r):(r(pa()),r(ga()),a(s.data.data,"error")),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(2),r(pa()),a("Server error","error");case 16:case"end":return n.stop()}}),n,null,[[2,12]])})));return function(e,t){return n.apply(this,arguments)}}()},wa=function(e){return function(){var t=Object(k.a)(w.a.mark((function t(a){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(ma()),ra.disconnect(),t.prev=2,t.next=5,L.delete("/signout");case 5:if(!(n=t.sent).data.status){t.next=13;break}e("Successful logout","success"),a(ga()),a(ue()),a(we()),t.next=14;break;case 13:throw new Error(n.data.data);case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(2),a(da()),e("Server error","error");case 20:case"end":return t.stop()}}),t,null,[[2,16]])})));return function(e){return t.apply(this,arguments)}}()},ka=sa.reducer,Ca=a(384),Sa=a(329),Na=a(382),Ta=a(272),Ia=a(320),La=a(65),Aa=function(){return r.a.createElement(Ia.a,null,r.a.createElement(d.a,{container:!0,direction:"column",justify:"center",alignItems:"center"},r.a.createElement(La.a,null,"There's some info missing about you"),r.a.createElement(La.a,null,"Please take a quick survey")))},Ua=a(2),Da=a(269),Va=a(270),Ma=a(328),Ba=a(377),Fa=a(325),Ra=a(322),Wa=a(323),Pa=a(326),_a=a(327),za=a(380),Ga=a(376),Ha=a(392),$a=a(379),Ka=Object(f.a)({Container:{width:"100%"}}),qa=function(e){var t=Ka(),a=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],i=function(){var e=Object(k.a)(w.a.mark((function e(){var t,a,n,i=arguments;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:0,a=i.length>1&&void 0!==i[1]?i[1]:10,e.next=4,L("tag",{params:{offset:t,limit:a}});case 4:(n=e.sent).data.status&&n.data.data&&r(n.data.data);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){i()}),[]);return{tags:a,fetchTags:i,addTags:function(e){var t=new Set([].concat(Object(C.a)(a),Object(C.a)(e)));r(Object(C.a)(t))},removeTags:function(e){var t=a.filter((function(t){return!e.find((function(e){return e===t}))}));r(t)}}}().tags,i=Object(n.useState)([]),o=Object(s.a)(i,2),c=o[0],l=o[1];return Object(n.useEffect)((function(){l(a)}),[a]),r.a.createElement(d.a,{className:t.Container},c&&r.a.createElement($a.a,{multiple:!0,freeSolo:!0,id:e.name,options:c,getOptionLabel:function(e){return e},defaultValue:e.tags,value:e.tags,onChange:function(t,a,n){return e.onChange({value:a})},filterSelectedOptions:!0,renderInput:function(e){return r.a.createElement(Ba.a,Object.assign({},e,{variant:"outlined",label:"Tags",placeholder:"Enter tag and press enter"}))}}))},Ya=a(115),Ja=Object(f.a)({ButtonListItem:{justifyContent:"center"},Input:{width:"100%"},SmallSelector:{minWidth:"100px",padding:"10px"},FormControl:{width:"100%",display:"flex",flexDirection:"column",alignItems:"flex-start"},RadioGroup:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"space-evenly",alignItems:"center"}}),Za=function(e){var t=new Date,a=e>t.getTime()+864e5?t:new Date(e),n=a.getFullYear();n<10?n="000"+n:n<100?n="00"+n:n<1e3&&(n="0"+n);var r=a.getMonth()+1;r=r<10?"0"+r:""+r;var i=a.getDate();return i=i<10?"0"+i:""+i,"".concat(n,"-").concat(r,"-").concat(i)},Xa=function(e){var t=Ja(),a=Object(V.a)({},e),i=a.type,o=a.label,c=a.name,l=a.values,u=a.value,m=a.onValidate,f=a.onChange,p=a.rules,g=a.ignoreUntouched,h=Object(Ua.a)(a,["type","label","name","values","value","onValidate","onChange","rules","ignoreUntouched"]),b=Object(n.useState)(!1),v=Object(s.a)(b,2),E=v[0],y=v[1],x=Object(n.useState)(!1),O=Object(s.a)(x,2),j=O[0],w=O[1],k=Object(n.useState)(""),C=Object(s.a)(k,2),S=C[0],N=C[1],T=p?Object(V.a)({},p):Object(V.a)({},{helperText:"",rule:null}),I=T.helperText,L=T.rule;switch(Object(n.useEffect)((function(){var e;e=!!L&&!function(e,t,a){return!a||e.length>=t.minLength&&e.length<=t.maxLength&&e.match(t.regex)}(u,L,g||E),N(e?I:""),m&&m((g||E||u.length)&&!e),w(e)}),[u,L,E,I,m,g]),i){case"text":case"number":case"email":case"password":return r.a.createElement(Ba.a,Object.assign({id:c,error:j,helperText:S,type:i,label:o,value:u,name:c,className:t.Input,onFocus:function(){return y(!0)},onChange:function(e){return f(e)}},h));case"select":return r.a.createElement(Ba.a,Object.assign({id:c,key:c,label:o,value:u,name:c,className:t.Input,onChange:function(e){return f(e)},select:!0},h),l.map((function(e){return r.a.createElement(Fa.a,{key:e,value:e},e)})));case"radio":return r.a.createElement(Ra.a,{className:t.FormControl,key:c,component:"fieldset"},r.a.createElement(Wa.a,{component:"legend"},Object(Ya.capitalize)(o)),r.a.createElement(Pa.a,{className:t.RadioGroup,value:u,"aria-label":c,name:c,onChange:function(e){return f(e)}},l.map((function(e){return r.a.createElement(_a.a,{key:e,value:e,control:r.a.createElement(za.a,{checked:u===e,color:"primary"}),label:Object(Ya.capitalize)(e)})}))));case"date":return r.a.createElement(Ba.a,Object.assign({id:c,type:"date",label:"Birth Date",name:c,className:t.Input,InputLabelProps:{shrink:!0},value:Za(u),onChange:function(e){return f(e)}},h));case"slider":return r.a.createElement(Ga.a,{className:t.Input},r.a.createElement(La.a,{id:"range-slider",gutterBottom:!0},o),r.a.createElement(Ha.a,Object.assign({value:u,onChange:function(e,t){return f(t)},valueLabelDisplay:"auto","aria-labelledby":"range-slider"},h)));case"doubleSelector":return r.a.createElement(Ga.a,{key:c,className:t.Input},r.a.createElement(d.a,{container:!0,justify:"space-evenly",alignItems:"center"},r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(Ba.a,Object.assign({shrink:!0,id:"min"+c,type:"number",value:u.minAge,label:"Minimum age",className:t.SmallSelector,onChange:function(e){return f({minAge:+e.target.value})}},h))),r.a.createElement(d.a,{item:!0,xs:4},r.a.createElement(Ba.a,Object.assign({shrink:!0,id:"max"+c,type:"number",value:u.maxAge,label:"Maximum age",className:t.SmallSelector,onChange:function(e){return f({maxAge:+e.target.value})}},h)))));case"autocomplete":return r.a.createElement(qa,Object.assign({name:c,className:t.Input,tags:l,onChange:f},h));default:return null}},Qa=Object(f.a)({Form:{width:"100%"},Button:{margin:"8px"},List:{width:"100%"},Buttons:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"},Fab:{position:"fixed",right:"2vw",bottom:"4rem",zIndex:2}}),en=function(e){var t=e.inputs,a=e.buttons,n=Qa();return r.a.createElement("form",{className:n.Form},r.a.createElement(Da.a,{className:n.List},t.map((function(e){return r.a.createElement(Va.a,{key:e.name||e.type},r.a.createElement(Xa,e))})),a&&r.a.createElement(Va.a,{className:n.Buttons},a.map((function(e){var t=e.component,a=e.variant,i=e.type,o=e.text,c=e.onClick,l=Object(Ua.a)(e,["component","variant","type","text","onClick"]);return"fab"===t?r.a.createElement(Ma.a,Object.assign({color:"primary",key:o,className:n.Fab,variant:a,type:i,onClick:c},l),o):r.a.createElement(Ta.a,Object.assign({key:o,className:n.Button,variant:a,type:i,onClick:c},l),o)})))))},tn=function(){var e=Object(l.b)(),t=Object(V.a)({},Object(l.c)((function(e){return e.additional}))),a=[{name:"username",type:"text",label:"Username",value:t.username,ignoreUntouched:!0,onChange:function(t){e(Ue(t.target.value))},onValidate:function(t){e(qe(t))},rules:{helperText:"Use letters, numbers or symbols ., %, _, -, +. Min length 3",rule:{minLength:3,maxLength:20,regex:/^[\w%-+.]+$/}}},{name:"name",type:"text",label:"First name",value:t.name,onChange:function(t){e(De(t.target.value))},onValidate:function(t){e(Ye(t))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"surname",type:"text",label:"Last name",value:t.surname,onChange:function(t){e(Ve(t.target.value))},onValidate:function(t){e(Je(t))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"birthDate",type:"date",label:"Birth date",value:t.birthDate,onChange:function(t){e(Be(t.target.value))}},{name:"gender",type:"radio",label:"I'm",values:["male","female"],value:t.gender,onChange:function(t){e(Fe(t.target.value))}}];return r.a.createElement(en,{inputs:a})},an=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.additional})),a=[{name:"phone",type:"text",label:"Phone",value:t.phone,ignoreUntouched:!0,inputProps:{autoFocus:!0},onChange:function(t){e(Re(t.target.value))},onValidate:function(t){e(Xe(t))},rules:{helperText:"invalid phone",rule:{minLength:0,maxLength:12,regex:/^$|^\+?\d+$/}}},{name:"country",type:"text",label:"Country",value:t.country,onChange:function(t){e(We(t.target.value))},onValidate:function(t){e(Qe(t))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"city",type:"text",label:"City",value:t.city,onChange:function(t){e(Pe(t.target.value))},onValidate:function(t){e(et(t))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"bio",type:"text",label:"Bio",value:t.bio,ignoreUntouched:!0,onChange:function(t){e(Me(t.target.value))},onValidate:function(t){e(Ze(t))},rules:{helperText:"invalid phone",rule:{minLength:2,maxLength:256,regex:/^.+$/}}}];return r.a.createElement(en,{inputs:a})},nn=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.additional})),a=t.lookFor,n=t.maxAge,i=t.minAge,o=[{name:"lookFor",type:"radio",label:"I look for",values:["male","female","both"],value:a,onChange:function(t){e(ze(t.target.value))}},{name:"maxDistance",type:"slider",label:"Search distance, km",step:10,min:10,max:1e4,value:t.maxDist,onChange:function(t){e(_e(t))}},{name:"ageRange",type:"slider",label:"Age search range",value:[i,n],onChange:function(t){e(Ge(t))}}];return r.a.createElement(en,{inputs:o})},rn=Object(f.a)({Grid:{height:"100vh"},Stepper:{backgroundColor:"#ffffff00"},Buttons:{width:"100%"}}),on=[{key:0,view:r.a.createElement(Aa,null),text:"Intro"},{key:1,view:r.a.createElement(tn,null),text:"Who are you?"},{key:2,view:r.a.createElement(an,null),text:"Where are you?"},{key:3,view:r.a.createElement(nn,null),text:"Who fits you?"}],cn=function(){var e=rn(),t=Object(n.useState)(0),a=Object(s.a)(t,2),i=a[0],o=a[1],c=ea().notif,u=Object(x.g)(),m=Object(l.b)(),f=Object(l.c)((function(e){return e.additional})),p=Object(V.a)({},f),g=p.id,h=p.name,b=p.surname,v=p.username,E=p.birthDate,y=p.phone,O=p.gender,j=p.country,w=p.city,k=p.maxDist,C=p.lookFor,S=p.minAge,N=p.maxAge,T=p.updateSuccess,I=Object(l.c)((function(e){return e.general.isLoading}));return r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(d.a,{item:!0,xs:12,sm:6,lg:4,container:!0,direction:"column",justify:"center",alignItems:"center",wrap:"nowrap",className:e.Grid},on[i].view,r.a.createElement(Ca.a,{className:e.Stepper,activeStep:i,alternativeLabel:!0},on.map((function(e){var t=e.key,a=e.text;return r.a.createElement(Sa.a,{key:t},r.a.createElement(Na.a,null,a))}))),r.a.createElement(d.a,{container:!0,justify:"space-evenly",className:e.Buttons},r.a.createElement(Ta.a,{disabled:I||0===i,onClick:function(){o((function(e){return e-1}))},variant:"outlined"},"Back"),r.a.createElement(Ta.a,{variant:"contained",color:"primary",onClick:function(){if(i===on.length-1){console.log("[AdditionalInfo] updateSuccess before dispatch",T);var e={id:g,name:h,surname:b,username:v,birthDate:E,phone:y,gender:O,country:j,city:w,maxDist:k,lookFor:C,minAge:S,maxAge:N},t=ya(e);console.log(t),t?c("Please, fill all the fields","error"):(m(nt(e,c)),m(de(t)),setTimeout((function(){return u.push("/")}),500))}else o((function(e){return e+1}))},disabled:I},i===on.length-1?"Finish":"Next"))))},ln=Object(S.createSlice)({name:"login",initialState:{email:"",password:"",emailValid:!1,passwordValid:!1},reducers:{changeEmail:function(e,t){e.email=t.payload},changePassword:function(e,t){e.password=t.payload},changeEmailValid:function(e,t){var a=t.payload;e.emailValid=a},changePasswordValid:function(e,t){var a=t.payload;e.passwordValid=a}}}),sn=ln.actions,un=sn.changeEmail,mn=sn.changePassword,dn=sn.changeEmailValid,fn=sn.changePasswordValid,pn=ln.reducer,gn=a(11),hn=Object(f.a)((function(e){var t;return{SingleForm:(t={width:"70vw",height:"100vh",margin:"0 auto"},Object(gn.a)(t,e.breakpoints.down("xs"),{width:"100vw"}),Object(gn.a)(t,e.breakpoints.up("md"),{maxWidth:"600px !important"}),t),label:{textTransform:"none"}}})),bn=function(){var e=ea().notif,t=hn(),a=Object(x.g)(),i=Object(l.b)(),o=Object(l.c)((function(e){return e.login})),c=o.email,u=o.password,f=o.emailValid,p=o.passwordValid,g=Object(l.c)((function(e){return e.general})).isLoading,h=Object(n.useState)(!0),b=Object(s.a)(h,2),v=b[0],E=b[1];Object(n.useEffect)((function(){E(f&&p)}),[f,p]);var y=function(){var t=Object(k.a)(w.a.mark((function t(a){return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),i(ja(c,u,e));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=[{name:"login",type:"text",label:"Login",value:c,placeholder:"Enter username or email",onValidate:function(e){i(dn(e))},onChange:function(e){i(un(e.target.value))},rules:{helperText:"invalid login",rule:{minLength:3,maxLength:40,regex:/^(([\w%+-.]+)@([\w-]+\.)+([\w]{2,}))|([\w%-+.]+)$/i}}},{name:"password",type:"password",label:"Password",value:u,required:!0,onValidate:function(e){i(fn(e))},onChange:function(e){i(mn(e.target.value))},rules:{helperText:"Use at least one lower- and uppercase letter, number and symbol. Min length 4",rule:{minLength:4,maxLength:20,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/}}}],j=[{variant:"contained",type:"submit",text:"Sign in",disabled:!v,onClick:function(e){y(e)}},{text:"Not yet with us?",onClick:function(){a.push("register")}}];return r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:t.SingleForm},g?r.a.createElement(m.a,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(en,{inputs:O,buttons:j}),r.a.createElement(Ta.a,{variant:"text",color:"primary",classes:{label:t.label},onClick:function(){a.push("/forgot")}},"Forgot password?")))},vn={email:"",username:"",password:"",confirm:"",emailValid:!1,usernameValid:!1,passwordValid:!1,confirmValid:!1,phoneValid:!1,registerSuccess:!1},En=Object(S.createSlice)({name:"register",initialState:vn,reducers:{changeEmail:function(e,t){var a=t.payload;e.email=a},changeUsername:function(e,t){var a=t.payload;e.username=a},changePassword:function(e,t){var a=t.payload;e.password=a},changeConfirmPassword:function(e,t){var a=t.payload;e.confirm=a},changeEmailValid:function(e,t){var a=t.payload;e.emailValid=a},changeUsernameValid:function(e,t){var a=t.payload;e.usernameValid=a},changePasswordValid:function(e,t){var a=t.payload;e.passwordValid=a},changeConfirmValid:function(e,t){var a=t.payload;e.confirmValid=a},onRegisterSuccess:function(e){Object(V.a)(Object(V.a)({},vn),{},{registerSuccess:!0})},onRegisterFail:function(e){e.registerSuccess=!1}}}),yn=En.actions,xn=yn.changeEmail,On=yn.changeUsername,jn=yn.changePassword,wn=yn.changeConfirmPassword,kn=yn.changeEmailValid,Cn=yn.changeUsernameValid,Sn=yn.changePasswordValid,Nn=yn.changeConfirmValid,Tn=(yn.changePhoneValid,yn.onRegisterSuccess),In=(yn.onRegisterFail,function(e,t,a,n,r){return function(){var i=Object(k.a)(w.a.mark((function i(o){var c,l;return w.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o(ma()),c={username:M(e),email:M(t),password:M(a)},i.prev=2,i.next=5,L.post("signup",c);case 5:!0===(l=i.sent).data.status?(o(Tn()),n("Account successfully created, now login","success"),r.push("/login")):n(l.data.data,"error"),i.next=13;break;case 9:i.prev=9,i.t0=i.catch(2),console.log(i.t0),n("server error","error");case 13:o(da());case 14:case"end":return i.stop()}}),i,null,[[2,9]])})));return function(e){return i.apply(this,arguments)}}()}),Ln=En.reducer,An=function(){var e=ea().notif,t=Object(l.b)(),a=hn(),i=Object(x.g)(),o=Object(l.c)((function(e){return e.register})),c=o.email,u=o.username,f=o.password,p=o.confirm,g=o.emailValid,h=o.usernameValid,b=o.passwordValid,v=o.confirmValid,E=Object(n.useState)(!1),y=Object(s.a)(E,2),O=y[0],j=y[1],C=Object(l.c)((function(e){return e.general})).isLoading;Object(n.useEffect)((function(){j(g&&h&&b&&v)}),[g,h,b,v]);var S=function(){var a=Object(k.a)(w.a.mark((function a(n){return w.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n.preventDefault(),t(In(u,c,f,e,i));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),N=[{name:"username",type:"text",label:"Username",value:u,required:!0,onValidate:function(e){t(Cn(e))},onChange:function(e){t(On(e.target.value))},rules:{helperText:"Use letters, numbers or symbols ., %, _, -, +. Min length 3",rule:{minLength:3,maxLength:20,regex:/^[\w%-+.]+$/}}},{name:"email",type:"email",label:"Email",value:c,required:!0,onValidate:function(e){t(kn(e))},onChange:function(e){t(xn(e.target.value))},rules:{helperText:"invalid email",rule:{minLength:3,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}},{name:"password",type:"password",label:"Password",value:f,required:!0,onValidate:function(e){t(Sn(e))},onChange:function(e){t(jn(e.target.value))},rules:{helperText:"Use at least one lower- and uppercase letter, number and symbol. Min length 4",rule:{minLength:4,maxLength:20,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/}}},{name:"confirm",type:"password",label:"Confirm",value:p,required:!0,onValidate:function(e){t(Nn(e))},onChange:function(e){t(wn(e.target.value))},rules:{helperText:"Confirm and password does not match",rule:{minLength:3,maxLength:20,regex:new RegExp("^".concat(f,"$"))}}}],T=[{variant:"contained",type:"submit",text:"Sign up",disabled:!O,onClick:function(e){S(e)}},{text:"Already a member?",onClick:function(){i.push("/login")}}];return r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center",direction:"column",className:a.SingleForm},C?r.a.createElement(m.a,null):r.a.createElement(en,{inputs:N,buttons:T}))},Un=a(360),Dn=a(362),Vn=a(378),Mn=a(367),Bn=a(368),Fn=a(369),Rn=a(370),Wn=a(371),Pn=a(356),_n=a(357),zn=a(118),Gn=a.n(zn),Hn=a(160),$n=a.n(Hn),Kn=a(339),qn=a(331),Yn=a(333),Jn=a(32),Zn=a.n(Jn),Xn=a(332),Qn=Object(f.a)({Card:{position:"relative",maxWidth:350,margin:"0 auto","&:hover":{"& $Media":{transform:"scale(1.2)"},"& $Fab":{opacity:1}}},Media:{paddingTop:"100%"},Grid:{marginTop:"10px"},Fab:{position:"absolute",bottom:"10px",right:"10px",transition:"0.3s",opacity:0,zIndex:4}}),er=function(e){var t=Qn(),a=Object(l.b)(),n=Object(l.c)((function(e){return e.general})),i=n.images,o=n.avatar;e.images&&(i=e.images);var c=ea().notif,s=function(){var t=Object(k.a)(w.a.mark((function t(n,r){var l,s,u;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.stopPropagation(),!e.images){t.next=3;break}return t.abrupt("return");case 3:return t.prev=3,t.next=6,A.delete("img/".concat(r),{responseType:"json"});case 6:l=t.sent,console.log(l),l.data.status&&(s=i.filter((function(e){return e.id!==r})),u=r===o.id?s[0]:o,console.log(s,u),a(ha({images:s,avatar:u}))),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),console.log(t.t0),c("Server error, try again later","error");case 15:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e,a){return t.apply(this,arguments)}}();return r.a.createElement(d.a,{className:t.Grid,container:!0,justify:"center",spacing:1},i.length>0?i.map((function(a){return r.a.createElement(d.a,{item:!0,xs:10,sm:6,md:4,key:a.id||a},r.a.createElement(qn.a,{className:t.Card},!e.images&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ma.a,{color:"secondary",className:t.Fab,size:"small",onClick:function(e){return s(e,a.id)}},r.a.createElement(Xn.a,null))),r.a.createElement(Yn.a,{className:t.Media,image:a.image||Zn.a})))})):r.a.createElement(La.a,null,"No images"))},tr=a(386),ar=Object(f.a)({Item:{margin:"0 5px"},Header:{fontSize:"1.3rem",fontWeight:500,display:"block"},Container:{width:"100%",padding:"0.5rem 0"}}),nr=function(e){var t=e.tags,a=ar();return r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(d.a,{className:a.Container,container:!0,direction:"column",alignItems:"flex-start",item:!0},r.a.createElement(La.a,{className:a.Header},"Interests:"),r.a.createElement(d.a,null,t?t.map((function(e){return r.a.createElement(tr.a,{className:a.Item,variant:"outlined",key:e,label:e})})):r.a.createElement(La.a,null,"No tags yet"))))},rr=Object(f.a)({Card:{width:"100%",maxHeight:200},Media:{paddingTop:"30%"}}),ir=function(e){var t=e.img,a=rr();return r.a.createElement(qn.a,{className:a.Card},r.a.createElement(Yn.a,{className:a.Media,image:t||Zn.a}))},or=Object(f.a)({Item:{padding:"10px 15px",width:"100%"},Header:{fontSize:"1.3rem",fontWeight:500,display:"block"},Container:{width:"100%",padding:"0.5rem 0"},fullWidth:{width:"100%"}}),cr=function(e){var t=e.bio,a=or();return r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(d.a,{className:a.Container,container:!0,direction:"column",alignItems:"flex-start",item:!0},r.a.createElement(La.a,{className:a.Header},"Bio:"),r.a.createElement(d.a,{className:a.fullWidth},r.a.createElement(tr.a,{className:a.Item,label:t,variant:"outlined"}))))},lr=a(340),sr=a(341),ur=a(342),mr=a(343),dr=a(29),fr=a.n(dr),pr=a(74),gr=function(e){var t=e.colors,a=void 0===t?{elementColor:{main:"#89b0e0",shadow:"#6197d5"},ringColor:{main:"#99ddfc",shadow:"#66cdf7"}}:t,n=Object(Ua.a)(e,["colors"]);return r.a.createElement(pr.a,Object.assign({viewBox:"0 0 511 511"},n),r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"m465.029.009h-70.218c-21.163 0-38.477 17.315-38.477 38.477 0 15.974 9.868 29.748 23.808 35.544 2.544 1.058 3.228 4.333 1.279 6.281l-143.536 143.535 49.261 49.26 143.536-143.536c1.948-1.948 5.223-1.265 6.281 1.279 5.796 13.94 19.57 23.808 35.544 23.808 21.163 0 38.478-17.315 38.477-38.477v-70.218c.672-26.836-18.806-45.953-45.955-45.953z",fill:a.elementColor.main}),r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"m301.028 160.703-63.143 63.143 49.261 49.26 62.107-62.108c-9.062-17.63-34.358-44.312-48.225-50.295z",fill:a.elementColor.shadow}),r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"m172.157 166.679c-95.08 0-172.157 77.077-172.157 172.156s77.077 172.157 172.157 172.157 172.157-77.077 172.157-172.157-77.078-172.156-172.157-172.156zm0 278.623c-58.8 0-106.466-47.667-106.466-106.466s47.667-106.466 106.466-106.466c58.8 0 106.466 47.667 106.466 106.466s-47.667 106.466-106.466 106.466z",fill:a.ringColor.main}),r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"m166.067 510.146c-10.713-22.493-19.376-45.941-26.316-69.873-42.953-13.71-74.061-53.938-74.061-101.438 0-45.748 28.857-84.752 69.359-99.816 1.911-7.469 3.992-14.898 6.242-22.279 3.69-12.108 7.948-24.071 13.413-35.503 2.329-4.871 4.904-9.746 7.926-14.293-90.647 4.945-162.63 80.009-162.63 171.891 0 93.162 74.002 169.028 166.428 172.052-.118-.248-.242-.493-.361-.741z",fill:a.ringColor.shadow}))},hr=function(e){var t=e.colors,a=void 0===t?{elementColor:{main:"#ef7d92",shadow:"#eb6773"},ringColor:{main:"#f6a7ae",shadow:"#f1919b"}}:t,n=Object(Ua.a)(e,["colors"]);return r.a.createElement(pr.a,Object.assign({viewBox:"0 0 511 511"},n),r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"m202.361 446.901h21.698v32.828c0 17.271 14.001 31.272 31.272 31.272 17.271 0 31.272-14.001 31.272-31.272v-32.828h22.037c14.985 0 27.133-12.148 27.133-27.133 0-14.985-12.148-27.133-27.133-27.133h-22.037v-98.818h-62.205l-.339 98.818h-21.698c-14.985 0-27.133 12.148-27.133 27.133 0 14.985 12.148 27.133 27.133 27.133z",fill:a.elementColor.main}),r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"m286.602 371.971v-74.042h-62.205l-.245 74.042c15.854 4.399 49.488 3.211 62.45 0z",fill:a.elementColor.shadow}),r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"m255.5 0c-95.136 0-172.259 77.123-172.259 172.259s77.123 172.259 172.259 172.259 172.259-77.123 172.259-172.259-77.123-172.259-172.259-172.259zm0 278.789c-58.835 0-106.53-47.695-106.53-106.53s47.695-106.53 106.53-106.53 106.53 47.695 106.53 106.53-47.695 106.53-106.53 106.53z",fill:a.ringColor.main}),r.a.createElement("path",{xmlns:"http://www.w3.org/2000/svg",d:"m151.81 196.75c-1.851-7.864-2.84-16.061-2.84-24.49 0-58.835 47.695-106.53 106.53-106.53 8.385 0 16.541.978 24.367 2.81 23.675-14.885 48.337-28.117 74.948-37.027-28.069-19.844-62.326-31.513-99.315-31.513-95.136 0-172.259 77.123-172.259 172.259 0 42.205 15.187 80.858 40.383 110.812.493-1.003 7.644-48.436 28.186-86.321z",fill:a.ringColor.shadow}))},br=a(387),vr=a(335),Er=a(336),yr=a(337),xr=a(338),Or=function(e){var t=e.open,a=e.onClose,i=Object(l.c)((function(e){return e.general.id})),o=Object(n.useState)({category:"",complaint:""}),c=Object(s.a)(o,2),u=c[0],m=c[1],d=Object(n.useState)(!1),f=Object(s.a)(d,2),p=f[0],g=f[1],h=Object(n.useState)(""),b=Object(s.a)(h,2),v=b[0],E=b[1],y=ea().notif,x=function(e){e.preventDefault(),m(Object(V.a)(Object(V.a)({},u),{},Object(gn.a)({},e.target.name,e.target.value))),"category"===e.target.name&&e.target.value.length>0&&E("")},O=function(){var e=Object(k.a)(w.a.mark((function e(t){var n,r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopPropagation(),0!==u.category.length){e.next=4;break}return E("Please, select category"),e.abrupt("return");case 4:return n={date:(new Date).getTime(),category:u.category,complaint:u.complaint,authorId:i},e.prev=5,e.next=8,L.post("report",n);case 8:if(!(r=e.sent).data.status){e.next=13;break}y("Report was successfully sent","success"),e.next=14;break;case 13:throw new Error(r.data.status||"Server error");case 14:a(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(5),y(e.t0,"error");case 20:case"end":return e.stop()}}),e,null,[[5,17]])})));return function(t){return e.apply(this,arguments)}}(),j=[{name:"category",type:"select",label:"Category",value:u.category,values:["Unacceptable behavior","Bad language","Advertisement account"],ignoreUntouched:!0,onChange:x},{name:"complaint",type:"text",label:"Complaint",value:u.complaint,ignoreUntouched:!0,onChange:x,onValidate:function(e){return g(e)},rules:{helperText:"Invalid complaint. Min length: 5, max length: 40",rule:{minLength:3,maxLength:40,regex:/^.+$/i}}}];return r.a.createElement(br.a,{style:{minWidth:400},open:t,onClose:a,"aria-labelledby":"form-report-user"},r.a.createElement(vr.a,{id:"form-report-user"},"Report user"),r.a.createElement(Er.a,null,r.a.createElement(yr.a,null,"Please give some description, why user is reported"),j.map((function(e){return r.a.createElement(Xa,Object.assign({style:{margin:"10px 0"},key:e.name},e))})),r.a.createElement(La.a,{style:{color:"red"}},v)),r.a.createElement(xr.a,null,r.a.createElement(Ta.a,{onClick:a},"Cancel"),r.a.createElement(Ta.a,{disabled:!p,onClick:O},"Submit")))},jr=function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.post("ban",{id:t});case 3:return a=e.sent,e.abrupt("return",a.data.status);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),wr=function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L.delete("ban/".concat(t));case 3:return a=e.sent,e.abrupt("return",a.data.status);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),kr=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.users})),a=t.strangers,n=t.banned,r=function(){var t=Object(k.a)(w.a.mark((function t(r){var i,o;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,jr(r);case 2:i=a.filter((function(e){return e.id!==r})),e(Mt(i)),o=[].concat(Object(C.a)(n),[r]),e(At(o));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),i=function(){var t=Object(k.a)(w.a.mark((function t(a){var r,i;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,wr(a);case 2:r=t.sent,n.length&&r&&(i=n.filter((function(e){return e!==a})),e(At(i)));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return{banned:n,banAndUpdate:r,unbanAndUpdate:i}};Gn.a.extend($n.a);var Cr=Object(f.a)((function(e){return{Typography:{fontSize:"1.5rem"},Name:{fontSize:"2rem",marginRight:10},Location:{fontSize:"1rem"},FullWidth:{width:"100%"},Fab:{position:"fixed",right:"1rem"},Message:{bottom:"12rem"},Like:{bottom:"8rem"},Ban:{bottom:"4rem"},FabIcon:{marginRight:"10px"},Status:{position:"absolute",left:"50%",width:"50%",marginLeft:"-25%",height:5,borderRadius:3,backgroundColor:e.palette.grey[500]},Online:{backgroundColor:e.palette.success.main},Report:{marginTop:10}}})),Sr=function(){var e,t=Cr(),a=Object(x.g)(),i=Object(l.c)((function(e){return e.UI.companion})),o=Object(V.a)({},i),c=o.id,u=o.images,m=o.avatar,f=o.gender,p=o.name,g=o.surname,h=o.country,b=o.city,v=o.age,E=o.bio,y=o.tags,O=o.rating,j=o.isOnline,C=o.lastOnline,S=ta(),N=S.selectChat,T=S.createChat,I=kr().banAndUpdate,L=Object(l.b)(),A=Object(l.c)((function(e){return e.chat.chat})),U=Object(l.c)((function(e){return e.users})).banned,D=Object(l.c)((function(e){return e.general})),M=D.likes,B=D.matches,F=Object(n.useState)(!1),R=Object(s.a)(F,2),W=R[0],P=R[1],_=j?"(online)":"(last seen ".concat(Gn()(1e3*C).fromNow(),")"),z=B.includes(c),G=Object(n.useState)(!1),H=Object(s.a)(G,2),$=H[0],K=H[1],q=!!U.find((function(e){return e===c}));Object(n.useEffect)((function(){P((function(){return M.includes(c)}))}),[M,c]),Object(n.useEffect)((function(){A&&a.push("/chat/".concat(A))}),[A,a]);var Y=function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(N(c)){e.next=5;break}return e.next=3,T(c);case 3:if(!e.sent){e.next=5;break}N(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){K((function(e){return!e}))};return r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center",className:t.FullWidth},r.a.createElement(ir,{img:(null===m||void 0===m?void 0:m.image)||(null===(e=u[0])||void 0===e?void 0:e.image)||Zn.a}),r.a.createElement("div",null,r.a.createElement("div",{className:j?fr()(t.Status,t.Online):t.Status})),r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center",item:!0,xs:12,sm:8,md:6},r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"baseline"},r.a.createElement(La.a,{className:t.Name},"".concat(p," ").concat(g)),"male"===f?r.a.createElement(gr,null):r.a.createElement(hr,null),r.a.createElement(La.a,{className:t.Typography},_)),r.a.createElement(La.a,{color:"secondary",className:t.Location},"".concat(h,", ").concat(b)),r.a.createElement(La.a,{className:t.Typography},"".concat(v," years old")),r.a.createElement(d.a,{className:t.FullWidth},r.a.createElement(La.a,{className:t.Typography},"Rating: ".concat(O.toFixed(2)))),r.a.createElement(Kn.a,{className:t.FullWidth}),r.a.createElement(nr,{tags:y}),r.a.createElement(Kn.a,{className:t.FullWidth}),r.a.createElement(cr,{bio:E||"UFO flew around and dropped this message here"}),r.a.createElement(er,{images:u}),r.a.createElement(Ta.a,{className:t.Report,onClick:J},"Report user"),z&&r.a.createElement(Ma.a,{variant:"extended",color:"primary",className:fr()(t.Fab,t.Message),onClick:Y},r.a.createElement(lr.a,{className:t.FabIcon}),"Send message"),u.length>0&&r.a.createElement(Ma.a,{variant:"extended",color:"secondary",className:fr()(t.Fab,t.Like),onClick:function(e){e.stopPropagation(),L(W?he(c):ge(c))}},W?r.a.createElement(r.a.Fragment,null,r.a.createElement(sr.a,{className:t.FabIcon}),"Unlike user"):r.a.createElement(r.a.Fragment,null,r.a.createElement(ur.a,{className:t.FabIcon}),"Like user")),r.a.createElement(Ma.a,{variant:"extended",color:"primary",className:fr()(t.Fab,t.Ban),onClick:function(){I(c)},disabled:q},r.a.createElement(mr.a,{className:t.FabIcon}),"Ban user")),r.a.createElement(Or,{open:$,onClose:J}))},Nr=a(167),Tr=a(344),Ir=a(345),Lr=Object(f.a)({Inputs:{width:"100%",margin:"10px 0"}}),Ar=function(){var e=Lr(),t=Object(l.c)((function(e){return e.filter})),a=t.username,n=t.city,i=t.country,o=t.gender,c=t.tags,s=t.age,u=t.rating,m=Object(l.b)(),f=ea().notif,p=[{name:"username",type:"text",label:"Username",value:a,onChange:function(e){m(je({username:e.target.value}))}},{name:"ageRange",type:"slider",label:"Age range",value:[s.minAge,s.maxAge],onChange:function(e){return m(je({age:e}))}},{name:"country",type:"text",label:"Country",value:i,onChange:function(e){m(je({country:e.target.value}))}},{name:"city",type:"text",label:"City",value:n,onChange:function(e){m(je({city:e.target.value}))}},{name:"gender",type:"radio",label:"I look for",values:["male","female","both"],value:o,onChange:function(e){m(je({gender:e.target.value}))}},{name:"rating",type:"slider",label:"Rating range",value:[u.min,u.max],min:0,max:1,step:.05,onChange:function(e){return m(je({rating:e}))}},{name:"tags",type:"autocomplete",values:c,onChange:function(e){m(je({tags:e}))}}];return r.a.createElement(r.a.Fragment,null,p.map((function(t){var a=t.name,n=t.type,i=t.label,o=t.value,c=t.values,l=t.onChange,s=Object(Ua.a)(t,["name","type","label","value","values","onChange"]);return r.a.createElement(d.a,{className:e.Inputs,key:a,item:!0,xs:12},r.a.createElement(Xa,Object.assign({name:a,type:n,label:i,value:o,values:c,onChange:l},s)))})),r.a.createElement(Ta.a,{style:{margin:"10px 0"},onClick:function(){m(wt(f,{username:a,city:n,country:i,gender:o,tags:c,age:s}))}},"get new strangers"))},Ur=a(383),Dr=Object(f.a)({Wrapper:{width:"100%",margin:"10px 0"},Active:{color:E.light,fontWeight:"bold"}}),Vr=function(){var e=Dr(),t=Object(l.b)(),a=Object(n.useState)(!0),i=Object(s.a)(a,2),o=i[0],c=i[1],u=Object(n.useState)(null),m=Object(s.a)(u,2),f=m[0],p=m[1],g=function(e,t){return e.username.localeCompare(t.username)},h=function(e,t){return t.username.localeCompare(e.username)},b=function(e,t){return e.age-t.age},v=function(e,t){return t.age-e.age},E=function(e,t){return e.rating-t.rating},y=function(e,t){return t.rating-e.rating},x=function(e,t){return e.country.localeCompare(t.country)||e.city.localeCompare(t.city)},O=function(e,t){return t.country.localeCompare(e.country)||t.city.localeCompare(e.city)},j=Object(n.useCallback)((function(){switch(f){case"username":return o?g:h;case"age":return o?b:v;case"rating":return o?E:y;case"location":return o?x:O;default:return}}),[o,f]);return Object(n.useEffect)((function(){t(Vt({compareFunction:j()}))}),[o,f,j,t]),r.a.createElement(d.a,{container:!0,justify:"space-around",alignItems:"center",className:e.Wrapper},r.a.createElement(Tr.a,{variant:"outlined"},r.a.createElement(Ta.a,{className:"username"===f&&e.Active,onClick:function(){return p("username")}},"username"),r.a.createElement(Ta.a,{className:"age"===f&&e.Active,onClick:function(){return p("age")}},"age"),r.a.createElement(Ta.a,{className:"rating"===f&&e.Active,onClick:function(){return p("rating")}},"rating"),r.a.createElement(Ta.a,{className:"location"===f&&e.Active,onClick:function(){return p("location")}},"location")),r.a.createElement(_a.a,{control:r.a.createElement(Ur.a,{checked:o,onChange:function(){return c((function(e){return!e}))},name:"isAscending"}),label:"Ascending order"}))},Mr=Object(f.a)((function(e){var t,a;return{Wrapper:(t={position:"fixed",right:0,bottom:"39px",zIndex:6,minWidth:400,maxWidth:700},Object(gn.a)(t,e.breakpoints.down("xs"),{maxWidth:"100%"}),Object(gn.a)(t,e.breakpoints.up("md"),{minWidth:"100%"}),t),Paper:(a={padding:"10px 40px",marginRight:120,width:"70vw",maxHeight:"90vh",overflow:"auto"},Object(gn.a)(a,e.breakpoints.down("xs"),{width:"100%",marginRight:"auto"}),Object(gn.a)(a,e.breakpoints.up("md"),{margin:"auto",maxWidth:550}),a),ButtonLabel:{fontFamily:"Righteous",fontSize:"1.2rem",padding:"0 15px"},Active:{boxShadow:"0 0 5px ".concat(E.light)},Arrow:{transition:"0.3s"},Less:{transform:"rotateX(180deg)"}}})),Br=function(){var e=Object(n.useState)(""),t=Object(s.a)(e,2),a=t[0],i=t[1],o=Object(n.useState)(!1),c=Object(s.a)(o,2),l=c[0],u=c[1],m=Mr(a),f=function(){u((function(e){return!e}))},p=function(e){var t=!a||(e===a||!l);i(e),t&&f()};return r.a.createElement(d.a,{className:m.Wrapper,container:!0,item:!0,xs:12,justify:"center",self:"flex-end"},r.a.createElement(Nr.a,{className:m.Paper},r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center"},r.a.createElement(d.a,{container:!0,item:!0,direction:"column",alignItems:"center"},l&&("filter"===a?r.a.createElement(Ar,null):r.a.createElement(Vr,null))),r.a.createElement(d.a,{container:!0,justify:"space-evenly",alignItems:"center",item:!0},r.a.createElement(Tr.a,{variant:"text",color:"secondary","aria-label":"text primary button group"},r.a.createElement(Ta.a,{className:l&&"filter"===a&&m.Active,classes:{label:m.ButtonLabel},onClick:function(){return p("filter")}},"Filter"),r.a.createElement(Ta.a,{className:l&&"sort"===a&&m.Active,classes:{label:m.ButtonLabel},onClick:function(){return p("sort")}},"Sort")),r.a.createElement(Ta.a,{onClick:f,size:"small",color:"secondary"},r.a.createElement(Ir.a,{className:l?m.Arrow:fr()(m.Arrow,m.Less)}))))))},Fr=a(391),Rr=a(349),Wr=a(351),Pr=a(347),_r=a(348),zr=a(350),Gr=a(346),Hr=Object(f.a)({UserCard:{maxWidth:350,minWidth:220,margin:"0 auto",position:"relative",overflow:"hidden","&:hover":{cursor:"pointer","& $Info":{transform:"translateY(-80px)"},"& $Fab":{opacity:1},"& $Stepper":{opacity:1}}},Info:{width:"105%",padding:"10px 30px 20px",position:"absolute",color:"white",left:-10,background:"linear-gradient(#00000000, #000000aa)",transition:"0.3s"},InfoHeader:{justifyContent:"space-between",padding:0,"& p":{fontSize:"1.5rem"}},Tags:{lineHeight:"0.5rem","& span":{fontSize:"1rem"},"& span:nth-child(n+2)::before":{content:'"|"',margin:"0 10px"}},Stepper:{backgroundColor:"#ffffff00",position:"absolute",width:"100%",transition:"0.3s",opacity:0},StepperButton:{backgroundColor:"#ffffff00",textShadow:"0,0,10,#00000055"},CardMedia:{height:0,paddingTop:"100%"},Fab:{position:"absolute",bottom:10,right:10,transition:"0.3s",opacity:0,zIndex:3},Like:{right:70},Ban:{right:10},Status:{position:"absolute",bottom:5,left:"50%",marginLeft:-20,width:40,height:5,borderRadius:3,backgroundColor:y.palette.grey[500]},Online:{backgroundColor:y.palette.success.main},Tooltip:{backgroundColor:y.palette.background.default,color:y.palette.grey[700],padding:20}}),$r={username:"",images:null,age:0,isOnline:!1},Kr=function(e){var t=Hr(),a=Object(n.useState)(0),i=Object(s.a)(a,2),o=i[0],c=i[1],u=Object(V.a)({},e.user).id,m=Object(l.c)((function(e){return e.users.users})).find((function(e){return e.id===u})),f=m||$r,p=f.username,g=f.images,h=f.age,b=f.isOnline,v=e.user.tags,E=Object(x.g)(),y=Object(l.b)(),O=kr().banAndUpdate,j=Object(l.c)((function(e){return e.general})).likes,w=Object(n.useState)(!1),k=Object(s.a)(w,2),C=k[0],S=k[1];Object(n.useEffect)((function(){S((function(){return j.includes(u)}))}),[j,u]);var N=0===(null===g||void 0===g?void 0:g.length)||o===(null===g||void 0===g?void 0:g.length)-1,T=0===o||0===(null===g||void 0===g?void 0:g.length);return r.a.createElement(d.a,{item:!0,xs:12,sm:6,lg:4},r.a.createElement(qn.a,{className:t.UserCard,onClick:function(t){y(me({companion:e.user})),y(function(e){return function(a){try{L.post("/look",{id:e})}catch(t){console.log(t)}}}(u)),y(fe({parent:"strangers"})),E.push("/strangers/"+u)}},r.a.createElement("div",null,g&&g.length>1&&r.a.createElement(Fr.a,{variant:"dots",steps:0,position:"static",activeStep:o,className:t.Stepper,nextButton:N?null:r.a.createElement(Ta.a,{color:"secondary",className:t.StepperButton,size:"small",onClick:function(e){e.stopPropagation(),c((function(e){return e+1}))}},r.a.createElement(Pr.a,null)),backButton:T?null:r.a.createElement(Ta.a,{color:"secondary",className:t.StepperButton,size:"small",onClick:function(e){e.stopPropagation(),c((function(e){return e-1}))}},r.a.createElement(_r.a,null))}),g&&g.length>0&&r.a.createElement(Rr.a,{style:{tooltip:t.Tooltip},title:C?"Unlike user":"Like user","aria-label":C?"Unlike user":"Like user"},r.a.createElement(Ma.a,{color:"secondary",className:fr()(t.Fab,t.Like),size:"small",onClick:function(e){return function(e){e.stopPropagation(),y(C?he(u):ge(u))}(e)}},C?r.a.createElement(sr.a,null):r.a.createElement(zr.a,null))),r.a.createElement(Rr.a,{style:{tooltip:t.Tooltip},title:"Ban user","aria-label":"Ban user"},r.a.createElement(Ma.a,{color:"secondary",className:fr()(t.Fab,t.Ban),size:"small",onClick:function(e){return function(e){e.stopPropagation(),O(u)}(e)}},r.a.createElement(mr.a,null))),function(){var e=Zn.a;if(g&&g.length){if(!g[o].image)return r.a.createElement(Gr.a,{variant:"rect",className:t.CardMedia});e=g[o].image}return r.a.createElement(Yn.a,{className:t.CardMedia,image:e})}(),r.a.createElement("div",{className:b?fr()(t.Status,t.Online):t.Status}),r.a.createElement(Wr.a,{className:t.Info},r.a.createElement(Ia.a,{className:t.InfoHeader},r.a.createElement(La.a,null,p,", ",h)),r.a.createElement("div",{className:t.Tags},v?v.map((function(e){return r.a.createElement("span",{key:e},"#",e)})):r.a.createElement("span",null,"No tags"))))))},qr=a(354),Yr=a(355),Jr=a(389),Zr=a(388),Xr=a(352),Qr=a(353),ei=Object(f.a)({Tooltip:{borderRadius:30},Grid:{padding:5,fontSize:"1rem"},margin:{marginRight:5}}),ti=function(e){var t,a,n=e.user,i=ei();return r.a.createElement(Xr.a,{position:[n.position.lat,n.position.lon]},r.a.createElement(Qr.a,{className:i.Tooltip},r.a.createElement(d.a,{container:!0,alignItems:"center",wrap:"nowrap",className:i.Grid},r.a.createElement(Zr.a,{src:(null===(t=n.avatar)||void 0===t?void 0:t.image)||n.images?null===(a=n.images[0])||void 0===a?void 0:a.image:null,alt:n.username,className:i.margin}),n.username)))},ai=function(e){var t=e.strangers,a=Object(qr.a)(),r=Object(n.useMemo)((function(){return function(e){return e&&e.length?e.reduce((function(e,t){var a=[Object(C.a)(e[0]),Object(C.a)(e[1])];return a[0][0]>t.position.lat&&(a[0][0]=t.position.lat),a[0][1]>t.position.lon&&(a[0][1]=t.position.lon),a[1][0]<t.position.lat&&(a[1][0]=t.position.lat),a[1][1]<t.position.lat&&(a[1][1]=t.position.lon),a}),[[90,360],[-90,0]]):null}(t)}),[t]);return Object(n.useEffect)((function(){r&&a.fitBounds(r)})),null},ni=function(e){var t=e.strangers,a=Object(l.c)((function(e){return e.general})).position,n=a.lat,i=a.lon;return console.log(n,i),r.a.createElement(Yr.a,{style:{height:"70vh",width:"100%",zIndex:10},center:[n,i],zoom:13,scrollWheelZoom:!0},r.a.createElement(Jr.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t&&t.map((function(e){return r.a.createElement(ti,{key:e.id,user:e})})),r.a.createElement(ai,{strangers:t}))},ri=Object(f.a)((function(e){return{Strangers:{fontSize:"2rem",paddingBottom:"60px",position:"relative"},CardContainer:{paddingBottom:"90px"},Text:{marginTop:"1rem",width:"100%",textAlign:"center"},Fab:Object(gn.a)({position:"fixed",right:"10px",bottom:"61px",zIndex:20},e.breakpoints.down("xs"),{bottom:"121px"}),Map:{width:"70vw",height:"70vh"}}})),ii=function(){var e=ea().notif,t=Object(l.c)((function(e){return e.users.strangers})),a=Object(l.c)((function(e){return e.filter})),i=Object(x.h)(),o=Object(n.useState)(null),c=Object(s.a)(o,2),u=c[0],m=c[1],f=ri(),p=Object(l.b)(),g=Object(n.useState)(!1),h=Object(s.a)(g,2),b=h[0],v=h[1];return Object(n.useEffect)((function(){p(wt(e))}),[]),Object(n.useLayoutEffect)((function(){for(var e=t.filter((function(e){return e.age>=a.age.minAge&&e.age<=a.age.maxAge&&e.rating>=a.rating.min&&e.rating<=a.rating.max})),n=function(){var t=c[o];e=a[t].length>0?e.filter((function(e){return e[t].toLowerCase().includes(a[t].toLowerCase())})):e},o=0,c=["username","city","country"];o<c.length;o++)n();if(e=a.gender.length>0&&"both"!==a.gender?e.filter((function(e){return e.gender===a.gender})):e,e=a.tags.length>0?e.filter((function(e){var t=new RegExp(a.tags.reduce((function(e,t){return"".concat(t,"|").concat(e)})).replace(/\\/g,"\\\\").replace("(","\\(").replace(")","\\)"));return!e.tags||0===e.tags.length||e.tags.find((function(e){return t.test(e)}))})):e,!(i.pathname.length>1)){var l=e&&e.length?e.map((function(e){return r.a.createElement(Kr,{user:e,key:e.id})})):r.a.createElement(La.a,{className:f.Text},"No users to display");m(l)}}),[a,f.Text,t,i.pathname]),r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center",className:f.Strangers},r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/strangers/:id",render:function(){return r.a.createElement(Sr,null)}}),r.a.createElement(x.b,{path:"/",exact:!0,render:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{className:f.CardContainer,container:!0,item:!0,xs:10,spacing:3},b?r.a.createElement(ni,{strangers:t,classes:f.Map}):r.a.createElement(r.a.Fragment,null,u,r.a.createElement(Br,null))),r.a.createElement(Ma.a,{className:f.Fab,variant:"extended",color:"primary",size:"large",onClick:function(){return v((function(e){return!e}))}},b?r.a.createElement(r.a.Fragment,null,r.a.createElement(Pn.a,{style:{marginRight:5}}),"Show cards"):r.a.createElement(r.a.Fragment,null,r.a.createElement(_n.a,{style:{marginRight:5}}),"Show map")))}})))},oi=Object(f.a)({root:{width:"100%",display:"flex",alignItems:"center",justifyContent:"center"}});var ci=function(e){var t=oi(),a=e.children,n=e.value,i=e.index,o=Object(Ua.a)(e,["children","value","index"]);return r.a.createElement(Ga.a,Object.assign({className:t.root,role:"tabpanel",hidden:n!==i,id:"full-width-tabpanel-".concat(i),"aria-labelledby":"full-width-tab-".concat(i),borderRadius:0},o),a)},li=a(161),si=a.n(li),ui=a(358),mi=Object(f.a)({Avatar:{width:"300px",height:"300px"}}),di=function(e){var t,a=e.loadingDisabled,i=mi(),o=Object(l.b)(),c=Object(l.c)((function(e){return e.general})),u=c.id,m=c.images,d=c.avatar,f=ea().notif,p=Object(n.useState)(null),g=Object(s.a)(p,2),h=g[0],b=g[1],v=function(){var e=Object(k.a)(w.a.mark((function e(t){var n,r,i,c;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=3;break}return f("Cannot upload more than 5 images","error"),e.abrupt("return");case 3:if(t.target.files&&0!==t.target.files.length){e.next=5;break}return e.abrupt("return");case 5:if(!((n=t.target.files[0]).size>1e6)){e.next=9;break}return f("The file is larger than 1MB","error"),e.abrupt("return");case 9:if(!(n.type.search(/image\/(png|jpeg)/i)<0)){e.next=12;break}return f("Only png and jpeg files allowed","error"),e.abrupt("return");case 12:return e.prev=12,e.next=15,D(u,n);case 15:if(r=e.sent,i=URL.createObjectURL(n),c={id:r.data.data.id,image:i},!r.data.status||!r.data.data){e.next=24;break}b(c),o(ha({images:[].concat(Object(C.a)(m),[c])})),f("The file was uploaded","success"),e.next=26;break;case 24:throw URL.revokeObjectURL(i),new Error("Unable to upload a photo");case 26:e.next=31;break;case 28:e.prev=28,e.t0=e.catch(12),f(e.t0,"error");case 31:case"end":return e.stop()}}),e,null,[[12,28]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(ui.a,{overlap:"circle",anchorOrigin:{vertical:"bottom",horizontal:"right"},badgeContent:r.a.createElement(Ma.a,{color:"primary","aria-label":"upload image",component:"label",onChange:function(e){return v(e)}},r.a.createElement(si.a,null),r.a.createElement("input",{type:"file",style:{display:"none"}}))},r.a.createElement(Zr.a,{className:i.Avatar,src:(null===h||void 0===h?void 0:h.image)||(null===d||void 0===d?void 0:d.image)||m.length?null===(t=m[0])||void 0===t?void 0:t.image:Zn.a}))},fi=a(359),pi=a(324),gi=Object(f.a)((function(e){return{root:{width:"100%",flexWrap:"nowrap"},Avatar:{marginRight:"1rem"},Text:{fontSize:"1rem",marginLeft:"auto",flexGrow:1},Date:{fontSize:"0.8rem",color:e.palette.grey[500]}}})),hi=function(e){var t,a,n,i,o=e.notification,c=gi();return r.a.createElement(d.a,{container:!0,alignItems:"center",className:c.root},r.a.createElement(Zr.a,{className:c.Avatar,src:(null===(t=o.user)||void 0===t||null===(a=t.avatar)||void 0===a?void 0:a.image)||(null===(n=o.user)||void 0===n?void 0:n.images)?null===(i=o.user.images[0])||void 0===i?void 0:i.image:Zn.a}),r.a.createElement(La.a,{className:c.Text},function(e){switch(e){case mt.NEW_LIKE:return"".concat(o.user.name," like you");case mt.DELETE_LIKE:return"".concat(o.user.name," does not like you anymore");case mt.NEW_LOOK:return"".concat(o.user.name," has visited you");case mt.NEW_MATCH:return"Match with ".concat(o.user.name,"!");case mt.DELETE_MATCH:return"You have no match with ".concat(o.user.name," anymore");case ft.NEW_MESSAGE:return"You have unread messages";default:throw new Error("[NotificationListItem] No such type in notification")}}(o.type)),r.a.createElement(La.a,{className:c.Date},function(e){var t=new Date(e),a=new Date,n=new Date(a.getFullYear(),a.getMonth(),a.getDate()).valueOf();return e<n-864e5?"".concat(t.getDay()," ").concat(t.getMonth()):e<n?"yesterday":t.toTimeString().split(" ")[0]}(o.date)))},bi=Object(f.a)((function(e){return{Avatar:{marginRight:"1rem"},Text:{fontSize:"1.5rem","@media (max-width: 600px)":{fontSize:"inherit"}},SecondaryText:{fontSize:"1.2rem",color:e.palette.grey[500],"@media (max-width: 600px)":{fontSize:"inherit"}}}})),vi=function(e){var t,a,n=e.user,i=bi();return r.a.createElement(d.a,{container:!0,alignItems:"center",wrap:"nowrap"},r.a.createElement(Zr.a,{className:i.Avatar,src:(null===n||void 0===n||null===(t=n.avatar)||void 0===t?void 0:t.image)||(null===n||void 0===n?void 0:n.images)?null===(a=n.images[0])||void 0===a?void 0:a.image:Zn.a}),r.a.createElement(d.a,{container:!0,direction:"column"},r.a.createElement(La.a,{className:i.Text},"".concat(n.name," ").concat(n.surname)),r.a.createElement(La.a,{className:i.SecondaryText},"".concat(n.age," years. ").concat(n.city,", ").concat(n.country))))},Ei=Object(f.a)((function(e){return{ButtonText:{"@media (max-width: 600px)":{display:"none"}},Menu:{width:"100%"},ListItem:{borderRadius:"30px",dispaly:"flex",justifyContent:"space-around",alignItems:"center"},Unread:{backgroundColor:e.palette.grey[200]},Center:{textAlign:"center"}}})),yi=Object(n.forwardRef)((function(e,t){var a=e.items,n=e.autoFocusItem,i=e.defaultText,o=e.setOpen,c=e.action,s=Ei(),u=Object(l.b)(),m=Object(x.g)(),d=Object(x.h)();var f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(a.length){t&&u($t({id:t}));var n=d.pathname.split("/")[1];u(fe({parent:n})),u(me({companion:e})),m.push("/strangers/".concat(e.id)),o&&o(!1)}};return r.a.createElement(pi.a,{className:s.Menu,ref:t,autoFocusItem:n,id:"users-list",onKeyDown:function(e){o&&"Tab"===e.key&&(e.preventDefault(),o&&o(!1))}},a&&a.length>0?a.map((function(e){return e?e.user?r.a.createElement(Fa.a,{className:e.status===dt.READ?s.ListItem:fr()(s.ListItem,s.Unread),onClick:function(){return f(e.user,e.id)},key:e.id},r.a.createElement(hi,{notification:e})):r.a.createElement(Fa.a,{className:s.ListItem,onClick:function(){return f(e)},key:e.id},r.a.createElement(vi,{user:e}),c&&r.a.createElement(Ta.a,{color:c.color,endIcon:c.icon,onClick:function(t){return function(e,t){e.stopPropagation(),c.onClick(t)}(t,e.id)}},r.a.createElement(La.a,{className:s.ButtonText},c.text))):null})):r.a.createElement(La.a,{className:s.Center},i))})),xi=function(){var e=kr(),t=e.banned,a=e.unbanAndUpdate,i=Object(l.b)(),o=Object(l.c)((function(e){return e.users.users}));Object(n.useLayoutEffect)((function(){i(kt(t))}),[i,t]);var c=Object(n.useMemo)((function(){return o&&o.length?t.map((function(e){return o.find((function(t){return t.id===e}))})):[]}),[t,o]),s=Object(n.useMemo)((function(){return{icon:r.a.createElement(fi.a,null),color:"secondary",onClick:a,text:"unban"}}),[a]);return r.a.createElement(d.a,{container:!0,item:!0,xs:12,sm:10,alignItems:"center",justify:"center"},t?r.a.createElement(yi,{items:c,defaultText:"No users banned. Yet...",action:s}):r.a.createElement(La.a,null,"No users banned. Yet..."))},Oi=a(162),ji=a.n(Oi),wi=function(e){var t=hn(),a=Object(l.c)((function(e){return e.register})),i=a.password,o=a.passwordValid,c=a.confirm,s=a.confirmValid,u=Object(l.b)(),m=Object(x.h)(),f=ea().notif,p=o&&s,g=ji.a.parse(m.search),h=function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,L("/reset",{params:{k:t}});case 3:(a=e.sent).data.status||f("".concat(a.data.data,". Try request link once again"),"warning"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),f("Server error","error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(k.a)(w.a.mark((function e(t){var a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,L.put("/reset",{password:i});case 4:(a=e.sent).data.status?f("New password successfully saved","success"):f(a.data.data,"success"),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),f("Server error","error");case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){h(g.k)}),[]);var v=[{name:"password",type:"password",label:"Password",value:i,required:!0,onValidate:function(e){u(Sn(e))},onChange:function(e){u(jn(e.target.value))},rules:{helperText:"Use at least one lower- and uppercase letter, number and symbol. Min length 4",rule:{minLength:4,maxLength:20,regex:/^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[-+_!@#$%^&*.,?]).{4,}$/}}},{name:"confirm",type:"password",label:"Confirm",value:c,required:!0,onValidate:function(e){u(Nn(e))},onChange:function(e){u(wn(e.target.value))},rules:{helperText:"Confirm and password does not match",rule:{minLength:3,maxLength:20,regex:new RegExp("^".concat(i,"$"))}}}],E=[{component:"button",type:"submit",text:"Save new password",size:"large",disabled:!p,onClick:b}];return r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center",justify:"center",className:t.SingleForm},r.a.createElement(en,{inputs:v,buttons:E}))},ki=a(317),Ci=Object(n.forwardRef)((function(e,t){return r.a.createElement(ki.a,Object.assign({direction:"up",ref:t},e))}));function Si(e){var t=e.buttonText,a=e.yesText,i=e.noText,o=e.header,c=e.text,u=e.className,m=Object(n.useState)(!1),d=Object(s.a)(m,2),f=d[0],p=d[1],g=Object(l.b)(),h=ea().notif,b=function(){p(!1)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ta.a,{variant:"outlined",color:"primary",onClick:function(){p(!0)},className:u},t),r.a.createElement(br.a,{open:f,TransitionComponent:Ci,keepMounted:!0,onClose:b,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},r.a.createElement(vr.a,{id:"alert-dialog-slide-title"},o),r.a.createElement(Er.a,null,r.a.createElement(yr.a,{id:"alert-dialog-slide-description"},c)),r.a.createElement(xr.a,null,r.a.createElement(Ta.a,{onClick:b,color:"primary"},i),r.a.createElement(Ta.a,{onClick:function(){var e;g((e=h,function(){var t=Object(k.a)(w.a.mark((function t(a){var n;return w.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,L.delete("account");case 3:if(n=t.sent,console.log(n.data),!n.data.status){t.next=12;break}e("Account successfully deleted","success"),a(ga()),a(ue()),a(we()),t.next=13;break;case 12:throw new Error(n.data.data);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(0),a(da()),e(t.t0,"error");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}())),p(!1)},color:"secondary"},a))))}var Ni=Object(f.a)({FullWidth:{width:"100%"},Button:{width:"80%",margin:"0.5rem 0"},lastButton:{marginTop:"2rem"},"@media (max-width: 600px)":{Button:{width:"100%"}}}),Ti=function(){var e=Ni(),t=Object(l.b)(),a=Object(x.g)(),i=ea().notif,o=Object(l.c)((function(e){return e.additional})),c=o.email,u=o.phone,m=o.birthDate,f=o.maxDist,p=o.lookFor,g=o.minAge,h=o.maxAge,b=o.emailValid,v=o.phoneValid,E=Object(l.c)((function(e){return e.general})),y=Object(n.useState)(!0),O=Object(s.a)(y,2),j=O[0],C=O[1],S=function(){var e=Object(k.a)(w.a.mark((function e(a){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(nt({email:c,phone:u,birthDate:m,maxDist:f,lookFor:p,minAge:g,maxAge:h},i));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){C(b&&v)}),[b,v]);var N=[{name:"email",type:"email",label:"Email",value:c,ignoreUntouched:!0,onChange:function(e){t(Ae(e.target.value))},onValidate:function(e){t(Ke(e))},rules:{helperText:"invalid email",rule:{minLength:3,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}},{name:"phone",type:"text",label:"Phone",value:u,ignoreUntouched:!0,onChange:function(e){t(Re(e.target.value))},onValidate:function(e){t(Xe(e))},rules:{helperText:"invalid phone",rule:{minLength:0,maxLength:12,regex:/^$|^\+?\d+$/}}},{name:"birthDate",type:"date",label:"Birth date",value:m,onChange:function(e){t(Be(e.target.value))}},{name:"lookFor",type:"radio",label:"I look for",values:["male","female","both"],value:p,onChange:function(e){t(ze(e.target.value))}},{name:"maxDist",type:"slider",label:"Search distance, km",step:10,min:10,max:1e4,value:f,onChange:function(e){t(_e(e))}},{name:"ageRange",type:"slider",label:"Age search range",value:[g,h],onChange:function(e){t(Ge(e))}}],T=[{component:"fab",type:"submit",text:"Save",size:"large",disabled:!j,onClick:S}],I=[{text:"request change password link",size:"large",onClick:function(){t(fe({parent:"profile"})),t(se({header:"Update password"})),t(oe()),L.post("/reset",{email:c}),i("Check your email","info")}},{text:"back",size:"large",onClick:function(){t(Le(E)),t(pe(a,"profile"))},className:e.lastButton}],A={text:"This action is irreversable. All your images, chats and likes will be vanished.",header:"Are you sure?",yesText:"Agree",noText:"Disagree",buttonText:"Delete account",className:e.Button};return r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center",className:e.FullWidth},r.a.createElement(en,{inputs:N,buttons:T}),r.a.createElement(Si,A),I.map((function(t){t.component;var a=t.variant,n=t.text,i=t.onClick,o=t.className,c=Object(Ua.a)(t,["component","variant","text","onClick","className"]);return r.a.createElement(Ta.a,Object.assign({key:n,className:o?fr()(o,e.Button):e.Button,variant:a,onClick:i},c),n)})))},Ii=function(){var e=Object(l.c)((function(e){return e.general})),t=Object(l.c)((function(e){return e.additional})),a=t.username,i=t.name,o=t.surname,c=t.bio,u=t.gender,m=t.country,d=t.city,f=t.usernameValid,p=t.nameValid,g=t.surnameValid,h=t.countryValid,b=t.cityValid,v=t.tags,E=Object(l.b)(),y=Object(x.g)(),O=ea().notif,j=Object(n.useState)(!0),C=Object(s.a)(j,2),S=C[0],N=C[1];Object(n.useEffect)((function(){N(f&&p&&g&&h&&b)}),[f,p,g,h,b]);var T=[{name:"username",type:"text",label:"Username",value:a,ignoreUntouched:!0,onChange:function(e){E(Ue(e.target.value))},onValidate:function(e){E(qe(e))},rules:{helperText:"Use letters, numbers or symbols ., %, _, -, +. Min length 3",rule:{minLength:3,maxLength:20,regex:/^[\w%-+.]+$/}}},{name:"name",type:"text",label:"First name",value:i,ignoreUntouched:!0,onChange:function(e){E(De(e.target.value))},onValidate:function(e){E(Ye(e))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"surname",type:"text",label:"Last name",value:o,ignoreUntouched:!0,onChange:function(e){E(Ve(e.target.value))},onValidate:function(e){E(Je(e))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"gender",type:"radio",label:"I am",values:["male","female"],value:u,onChange:function(e){E(Fe(e.target.value))}},{name:"country",type:"text",label:"Country",value:m,ignoreUntouched:!0,onChange:function(e){E(We(e.target.value))},onValidate:function(e){E(Qe(e))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"city",type:"text",label:"City",value:d,ignoreUntouched:!0,onChange:function(e){E(Pe(e.target.value))},onValidate:function(e){E(et(e))},rules:{helperText:"Use letters, numbers or symbols ., -. Min length 2",rule:{minLength:2,maxLength:20,regex:/^[\w-.]+$/}}},{name:"bio",type:"text",label:"Bio",value:c,ignoreUntouched:!0,onChange:function(e){E(Me(e.target.value))},onValidate:function(e){Ze(e)},rules:{helperText:"Write some info about yourself",rule:{minLength:2,maxLength:256,regex:/^.+$/}}},{name:"tags",type:"autocomplete",values:v||[],onChange:function(e){return E(He(e))}}],I=[{component:"fab",type:"submit",text:"Save",size:"large",disabled:!S,onClick:function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),E(nt({username:a,name:i,surname:o,gender:u,country:m,city:d,bio:c,tags:v},O));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{text:"back",size:"large",onClick:function(){E(Le(e)),E(pe(y,"profile"))},style:{marginBottom:"2rem"}}];return r.a.createElement(en,{inputs:T,buttons:I})},Li=a(271),Ai=Object(f.a)((function(e){return{formControl:{margin:e.spacing(3)},Buttons:{marginTop:30}}})),Ui=function(){var e=Ai(),t=Object(x.g)(),a=Object(l.b)(),i=Object(l.c)((function(e){return e.general})).useLocation,o=Object(n.useState)({location:i,email:!0}),c=Object(s.a)(o,2),u=c[0],m=c[1],f=ea().notif,p=u.location,g=u.email,h=function(e){m(Object(V.a)(Object(V.a)({},u),{},Object(gn.a)({},e.target.name,e.target.checked)))};return r.a.createElement(d.a,null,r.a.createElement(Ra.a,{component:"fieldset",className:e.formControl},r.a.createElement(Wa.a,{component:"legend"},"Profile settings"),r.a.createElement(Li.a,null,r.a.createElement(_a.a,{control:r.a.createElement(Ur.a,{checked:p,onChange:h,color:"primary",name:"location"}),label:"Use my current location for search"}),r.a.createElement(_a.a,{control:r.a.createElement(Ur.a,{checked:g,onChange:h,color:"primary",name:"email"}),label:"Send email notification"})),r.a.createElement(d.a,{className:e.Buttons,container:!0,justify:"space-around"},r.a.createElement(Ta.a,{onClick:function(){a(pe(t,"profile"))}},"cancel"),r.a.createElement(Ta.a,{onClick:function(){console.log("[ProfileSettings]",u),a(ha({useLocation:u.location})),a($e(u.location)),a(nt({useLocation:u.location},f))},variant:"contained"},"Save"))))},Di=Object(f.a)({root:{width:"100%"},Button:{width:"60%",margin:"0.5rem 0"},"@media (max-width: 600px)":{Button:{width:"100%"}}}),Vi=function(){var e=Di(),t=Object(x.g)(),a=Object(l.b)(),n=function(e){var n=e.header,r=e.url;a(fe({parent:"profile"})),a(se({header:n})),a(oe()),t.push("/profile/".concat(r))};return r.a.createElement(r.a.Fragment,null,r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/profile",exact:!0},r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center",className:e.root},r.a.createElement(Ta.a,{className:e.Button,onClick:function(){n({header:"Update public info",url:"public"})}},"Update public info"),r.a.createElement(Ta.a,{className:e.Button,onClick:function(){n({header:"Update personal info",url:"personal"})}},"Update personal info"),r.a.createElement(Ta.a,{className:e.Button,onClick:function(){n({header:"Settings",url:"settings"})}},"Settings"))),r.a.createElement(x.b,{path:"/profile/public",component:Ii}),r.a.createElement(x.b,{path:"/profile/personal",component:Ti}),r.a.createElement(x.b,{path:"/profile/settings",component:Ui}),r.a.createElement(x.b,{path:"/profile/password-update",component:wi})))},Mi=Object(f.a)({indicator:{backgroundColor:"#ffffff00",border:"1px solid ".concat(v.dark),bottom:0,height:"100%",borderRadius:"30px","&:hover,&:focus":{borderColor:E.main}},TabPanel:{backgroundColor:b,borderRadius:"30px",padding:"5px"},Profile:{minHeight:"100vh",paddingBottom:"60px"},Tab:{"&:hover,&:focus":{color:E.main}}}),Bi=[{id:0,text:"Gallery",component:r.a.createElement(er,null)},{id:1,text:"Banned",component:r.a.createElement(xi,null)},{id:2,text:"Settings",component:r.a.createElement(Vi,null)}],Fi=Object(n.createContext)(Bi[0].id),Ri=function(){var e=Mi(),t=Object(n.useState)(0),a=Object(s.a)(t,2),i=a[0],o=a[1],c=Object(l.c)((function(e){return e.general})).images,u=Bi.map((function(t,a){return r.a.createElement(Un.a,{className:e.Tab,disableRipple:!0,label:t.text,key:a})}));return r.a.createElement(d.a,{container:!0,wrap:"nowrap",direction:"column",justify:"flex-start",alignItems:"center",className:e.Profile},r.a.createElement(Fi.Provider,{value:i},r.a.createElement(di,{loadingDisabled:c&&c.length>=5}),r.a.createElement(Vn.a,{classes:{root:e.TabPanel,indicator:e.indicator},value:i,onChange:function(e,t){o(t)}},u),r.a.createElement(ci,{value:i,index:Bi[i].id,key:Bi[i].id},Bi[i].component)))},Wi=a(266),Pi=a(334),_i=a(318),zi=a(163),Gi=a.n(zi),Hi=a(361);function $i(e){var t=e.children,a=Object(Hi.a)({disableHysteresis:!0,threshold:0});return Object(n.cloneElement)(t,{elevation:a?4:0})}var Ki=Object(f.a)({Appbar:{paddingTop:"10px",backgroundColor:h},Header:{textAlign:"center",fontFamily:"Righteous",color:v.dark,fontSize:"2rem",textTransform:"capitalize"},Popper:{zIndex:5,textAlign:"center"},PopperPaper:{padding:"1rem 1.5rem"},Notifications:{overflowY:"scroll",maxHeight:500,scrollbarWidth:"none","&hover":{scrollbarWidth:"auto"},"&:hover>&::-webkit-scrollbar":{opacity:1},"&::-webkit-scrollbar":{width:3,opacity:0},"&::-webkit-scrollbar-thumb":{borderRadius:3}},Category:{fontSize:"1rem",fontWeight:700},Button:{marginLeft:20}}),qi=function(e){var t=e.header,a=Ki(),i=Object(l.c)((function(e){return e.users.users})),o=Object(l.c)((function(e){return e.general})),c=Object(l.c)((function(e){return e.WS})).notifications,u=Object(n.useState)([]),m=Object(s.a)(u,2),f=m[0],p=m[1],g=Object(x.h)(),h=Object(x.g)(),b=Object(l.b)(),E=Object(n.useState)(!1),y=Object(s.a)(E,2),O=y[0],j=y[1],w=Object(n.useRef)(null);Object(n.useEffect)((function(){var e=c.map((function(e){return e.userId}));b(kt(e))}),[b,c]),Object(n.useEffect)((function(){if(c){var e=c.map((function(e){var t=i.find((function(t){return t.id===e.userId}));return Object(V.a)(Object(V.a)({},e),{},{user:t})})).reverse();e&&p(e)}}),[i,c]);var k=function(){b(Kt())},C=g.pathname.split("/").length>2,S=function(e){w.current&&w.current.contains(e.target)||j(!1)},N=f&&f.length?f.reduce((function(e,t){return e+(t.status===dt.NEW?1:0)}),0):0;return r.a.createElement($i,null,r.a.createElement(Dn.a,{className:a.Appbar},r.a.createElement(d.a,{container:!0,justify:"space-around",alignItems:"center",item:!0},r.a.createElement(d.a,{item:!0,xs:2},C?r.a.createElement(Ta.a,{variant:"text",color:"inherit",onClick:function(){var e=g.pathname.split("/")[1];"profile"===e&&b(Le(o)),b(pe(h,e))}},r.a.createElement(_r.a,{style:{color:v.dark},fontSize:"large"})):null),r.a.createElement(d.a,{item:!0,xs:6},r.a.createElement(La.a,{variant:"h1",className:a.Header},t)),r.a.createElement(d.a,{item:!0,xs:2},r.a.createElement(Ta.a,{ref:w,variant:"text",color:"inherit",onClick:function(){j((function(e){return!e}))}},r.a.createElement(ui.a,{color:"secondary",overlap:"circle",variant:"dot",badgeContent:N},r.a.createElement(Gi.a,{style:{color:v.dark},fontSize:"large"}))),r.a.createElement(Wi.a,{className:a.Popper,open:O,anchorEl:w.current,placement:"left",transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps;return r.a.createElement(Pi.a,t,r.a.createElement(Nr.a,{className:a.PopperPaper},r.a.createElement(La.a,{className:a.Category},"Notifications"),f.length?r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center",className:a.Notifications},r.a.createElement(_i.a,{onClickAway:S},r.a.createElement(yi,{items:f,autoFocusItem:O,setOpen:j})),r.a.createElement(Ta.a,{size:"small",onClick:k,className:a.Button},"Read all")):r.a.createElement(La.a,null,"No recent actions yet")))}))))))},Yi=a(363),Ji=a(364),Zi=Object(f.a)((function(e){return{List:{width:"100%",textAlign:"center"},ListItem:{width:"80%",margin:"0 auto",display:"flex",justifyContent:"space-around",alignItems:"center",borderRadius:"30px"},Username:{fontWeight:800},Text:{fontSize:"1rem"},Secondary:{display:"-webkit-box",lineClamp:1,boxOrient:"vertical",overflow:"hidden"},Status:{border:"3px solid theme.palette.grey[500]"},Online:{backgroundColor:e.palette.success.main},Badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(e.palette.background.paper),"&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid currentColor",content:'""'}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}},NewMessages:{padding:"5px 8px",borderRadius:20,backgroundColor:e.palette.primary.light}}})),Xi=function(){var e=Zi(),t=Object(l.c)((function(e){return e.chat.chats})),a=Object(l.c)((function(e){return e.users.users})),i=Object(l.c)((function(e){return e.general.id})),o=Object(x.g)(),c=Object(l.b)(),s=ta().getChatsInfo;Object(n.useEffect)((function(){s()}),[]);var u=t.map((function(e){var t=Object(V.a)({},e),n=t.userIds.find((function(e){return e!==i})),r=a.find((function(e){return e.id===n}));return t.user=Object(V.a)({},r),t}));return r.a.createElement(Da.a,{className:e.List},u.length?u.map((function(t){var a,n,i=Object(V.a)({},t.user),l=i.name,s=i.avatar,u=i.images,m=i.isOnline,d=Object(V.a)({},t).messages,f=d.filter((function(e){return e.status!==pt.STATUS_READ}));console.log(t);var p=(null===s||void 0===s?void 0:s.image)||u&&u.length?null===(a=u[0])||void 0===a?void 0:a.image:null;return r.a.createElement(Va.a,{className:e.ListItem,button:!0,onClick:function(){return e=t.id,a=t.user,c(q({id:e})),c(me({companion:a})),void o.push("/chat/".concat(e));var e,a},key:t.id},r.a.createElement(ui.a,{color:"primary",overlap:"circle",variant:"dot",badgeContent:m?1:0,classes:{badge:e.Badge}},r.a.createElement(Yi.a,null,r.a.createElement(Zr.a,{src:p,alt:l}))),r.a.createElement(Ji.a,{primary:l,primaryTypographyProps:{className:e.Username},secondary:d&&(null===(n=d[d.length-1])||void 0===n?void 0:n.text)||"",secondaryTypographyProps:{className:e.Secondary}}),f.length>0&&r.a.createElement("div",{className:e.NewMessages},f.length))})):r.a.createElement(La.a,{className:e.Text},"No chats yet"))},Qi=a(365),eo=a(366),to=Object(f.a)({Container:{width:"100%",justifyContent:function(e){return e.self?"flex-end":"flex-start"},"& $Paper":{borderRadius:function(e){return e.self?"30px 30px 5px 30px":"5px 30px 30px 30px"}}},Paper:{padding:"0.4rem 1.5rem",marginLeft:"1rem",maxWidth:"60%",backgroundColor:function(e){return e.self?v.light:b}},Typography:{fontSize:"1rem"},Info:{justifyContent:function(e){return e.self?"flex-end":"flex-start"}},Date:{fontSize:"0.7rem",color:v.contrastTextLighter},Icon:{marginLeft:"0.3rem",fontSize:"0.7rem",color:function(e){return e.status===pt.STATUS_NEW?v.contrastTextLighter:E.main}},Badge:{backgroundColor:"#44b700",color:"#44b700",boxShadow:"0 0 0 2px ".concat(y.palette.background.paper),transform:"translate(0px, 0px)","&::after":{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",border:"1px solid currentColor",content:'""'}},"@media (max-width: 600px)":{Avatar:{display:"none"},Paper:{maxWidth:"100%",padding:"0.3rem 1rem"}}}),ao=function(e){var t=Object(V.a)({},e),a=t.self,n=t.text,i=t.image,o=t.name,c=t.date,s=t.status,u=Object(l.c)((function(e){return e.UI.companion.isOnline})),m=to({self:a,status:s});return r.a.createElement(d.a,{container:!0,className:m.Container},a?null:r.a.createElement(ui.a,{color:"primary",variant:"dot",badgeContent:u?1:0,classes:{badge:m.Badge}},r.a.createElement(Zr.a,{className:m.Avatar,src:i,alt:o})),r.a.createElement(Nr.a,{elevation:1,className:m.Paper},r.a.createElement(d.a,{container:!0},r.a.createElement(La.a,{className:m.Typography},n)),r.a.createElement(d.a,{className:m.Info,container:!0,alignItems:"center"},r.a.createElement(La.a,{component:"span",className:m.Date},function(e){var t=new Date(e),a=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes();return"".concat(t.getHours(),":").concat(a)}(c)),s===pt.STATUS_READ?r.a.createElement(Qi.a,{className:m.Icon}):r.a.createElement(eo.a,{className:m.Icon}))))},no=a(385),ro=a(164),io=a.n(ro),oo=Object(f.a)({Wrapper:{border:"1px solid #ccc",borderRadius:"45px",padding:"10px",backgroundColor:b},Input:{flexGrow:2,paddingLeft:"20px"},Send:{boxShadow:"none"},Icon:{transform:"rotate(-38deg) skew(17deg, 4deg) translateX(2px)"},Form:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}}),co=function(){var e=oo(),t=r.a.useState(""),a=Object(s.a)(t,2),n=a[0],i=a[1],o=Object(l.c)((function(e){return e.UI.companion.id})),c=ta().newMsg;return r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center"},r.a.createElement(d.a,{className:e.Wrapper,container:!0,direction:"row",justify:"center",alignItems:"center",item:!0,xs:10,sm:8},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n.length&&(c(o,n),i(""))},className:e.Form},r.a.createElement(no.a,{className:e.Input,onChange:function(e){return i(e.target.value)},value:n}),r.a.createElement(Ma.a,{type:"submit",className:e.Send,size:"small",color:"secondary"},r.a.createElement(io.a,{className:e.Icon})))))},lo=Object(f.a)({Container:{minHeight:"91vh"},List:{flexGrow:2,width:"70%",maxHeight:"70vh",margin:"0 auto",overflowY:"auto"},ListItem:{margin:"20px auto"},Header:{marginTop:"30px"},SendForm:{marginTop:"auto",marginBottom:"70px"}}),so=function(){var e=lo(),t=ta().readMsg,a=Object(n.useRef)(null),i=Object(n.useState)([]),o=Object(s.a)(i,2),c=o[0],u=o[1],m=Object(l.c)((function(e){return e.UI.companion})),f=m.name,p=m.avatar,g=m.images,h=Object(l.c)((function(e){return e.chat})),b=h.chat,v=h.chats,E=Object(l.c)((function(e){return e.general.id})),y=v.find((function(e){return e.id===b})).messages;console.log("[ChatRoom] mappedMessages",c),console.log("[ChatRoom] messages",y);var x=Object(n.useMemo)((function(){return y&&y.length?y.map((function(t){var a;return r.a.createElement(Va.a,{key:t.id,className:e.ListItem},r.a.createElement(ao,{self:t.sender===E,text:t.text,image:(null===p||void 0===p?void 0:p.image)||g&&g.length?null===(a=g[0])||void 0===a?void 0:a.image:null,name:f,date:t.date,status:t.status}))})):[]}),[p,e.ListItem,g,y,E,f]);return Object(n.useEffect)((function(){u(x)}),[x]),Object(n.useEffect)((function(){y&&y.length&&(y.forEach((function(e){if(e.sender!==E)switch(e.status){case pt.STATUS_NEW:case pt.STATUS_DELIVERED:return void t(e);case pt.STATUS_READ:default:return}})),a.current.scrollIntoView({behavior:"smooth"}))}),[y,E,t]),r.a.createElement(d.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:1,className:e.Container},r.a.createElement(Da.a,{className:e.List},c.length?c:"No messages yet",r.a.createElement("div",{ref:a})),r.a.createElement(d.a,{item:!0,className:e.SendForm},r.a.createElement(co,null)))},uo=Object(f.a)({Grid:{overflow:"hidden",width:"100%"}}),mo=function(){var e=uo(),t=Object(l.c)((function(e){return e.chat.chats}));return r.a.createElement(d.a,{container:!0,justify:"center",direction:"column",className:e.Grid},r.a.createElement(x.d,null,t.map((function(e){return r.a.createElement(x.b,{key:e.id,path:"/chat/".concat(e.id),render:function(){return r.a.createElement(so,null)}})})),r.a.createElement(x.b,{path:"/chat",exact:!0,render:function(){return r.a.createElement(Xi,null)}})))},fo=function(){var e=navigator.geolocation,t=Object(l.b)(),a=function(e){var a=e.coords;if(a){var n={position:{lat:a.latitude,lon:a.longitude}};t(ha(n)),po(n.position)}},n=function(){var e=Object(k.a)(w.a.mark((function e(a){var n;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,go();case 2:(n=e.sent).status&&t(ha(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{gps:e,getCurrentLocaion:function(){e.getCurrentPosition(a,n)}}},po=function(){var e=Object(k.a)(w.a.mark((function e(t){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L.put("location",t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),go=function(){var e=Object(k.a)(w.a.mark((function e(){return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://www.cloudflare.com/cdn-cgi/trace").then((function(e){return e.text()})).then((function(e){return e.match(/(?<=(ip=))([\d.]+)/g)[0]})).then((function(e){return fetch("https://freegeoip.app/json/".concat(e))})).then((function(e){return e.json()})).then((function(e){var t={lat:e.latitude,lon:e.longitude};return po(t),e})).then((function(e){return{status:!0,data:{position:{lat:e.latitude,lon:e.longitude}}}}));case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),console.log(e.t0),e.abrupt("return",{status:!1,data:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),ho=Object(f.a)((function(e){return{root:{paddingBottom:40},Grid:{overflow:"hidden",width:"100%"},Header:{fontSize:"1.5rem",marginTop:30,fontFamily:"Righteous",color:e.palette.primary.dark},List:{width:"80%"}}})),bo=function(){var e=ho(),t=Object(l.c)((function(e){return e.general})),a=t.lookedBy,i=t.likedBy,o=t.matches,c=Object(l.c)((function(e){return e.users})).users,u=Object(n.useState)([]),m=Object(s.a)(u,2),f=m[0],p=m[1],g=Object(n.useState)([]),h=Object(s.a)(g,2),b=h[0],v=h[1],E=Object(n.useState)([]),y=Object(s.a)(E,2),x=y[0],O=y[1];return Object(n.useEffect)((function(){if(a&&a.length){var e=a.map((function(e){return c.find((function(t){return t.id===e}))}));p(e)}}),[c,a]),Object(n.useEffect)((function(){if(i&&i.length){var e=i.map((function(e){return c.find((function(t){return t.id===e}))}));v(e)}}),[c,i]),Object(n.useEffect)((function(){if(o&&o.length){var e=o.map((function(e){return c.find((function(t){return t.id===e}))}));O(e)}}),[c,o]),r.a.createElement(d.a,{container:!0,alignItems:"center",direction:"column",className:e.root},r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center",wrap:"nowrap",className:e.List},r.a.createElement(La.a,{variant:"h2",className:e.Header},"People, who looked me"),r.a.createElement(yi,{items:f,defaultText:"No one visited you"})),r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center",wrap:"nowrap",className:e.List},r.a.createElement(La.a,{variant:"h2",className:e.Header},"People, who liked me"),r.a.createElement(yi,{items:b,defaultText:"No one liked you"})),r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center",wrap:"nowrap",className:e.List},r.a.createElement(La.a,{variant:"h2",className:e.Header},"People, who matched with me"),r.a.createElement(yi,{items:x,defaultText:"No one liked you"})))},vo=Object(f.a)({selectedTab:{color:"red"},AppBar:{position:"fixed",left:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center"},View:{display:"flex",justifyContent:"center",alignItems:"center"},Max:{width:"100%",height:"100vh"},Container:{paddingTop:"70px",backgroundColor:h,maxWidth:"100vw",width:"100%"},Tab:{"@media (min-width: 600px)":{minWidth:100},"@media (min-width: 900px)":{minWidth:160}}}),Eo=[{index:0,label:"Strangers",icon:r.a.createElement(Mn.a,null),content:r.a.createElement(ii,null),url:"/"},{index:1,label:"Chat",icon:r.a.createElement(Bn.a,null),content:r.a.createElement(mo,null),url:"/chat"},{index:2,label:"Social",icon:r.a.createElement(Fn.a,null),content:r.a.createElement(bo,null),url:"/social"},{index:3,label:"Settings",icon:r.a.createElement(Rn.a,null),content:r.a.createElement(Ri,null),url:"/profile"},{index:4,label:"Logout",icon:r.a.createElement(Wn.a,null),content:null,url:"/logout"}],yo=Object(x.i)((function(){var e=ea(),t=e.notif,a=e.showPrompt,i=Object(l.c)((function(e){return e.UI})),o=i.header,s=i.selectedTab,u=i.companion,f=Object(l.c)((function(e){return e.general})).isLoading,p=Object(l.b)(),g=Object(x.g)(),h=vo(),b=ta().getChatsInfo,v=fo().getCurrentLocaion;oa();var E=function(){var e=Object(k.a)(w.a.mark((function e(a,n){var r;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("/logout"!==n){e.next=4;break}return p(wa(t)),g.push("/login"),e.abrupt("return");case 4:r=Eo.find((function(e){return e.url===n})),p(se({header:r.label})),p(me({companion:null})),p(le({selectedTab:r})),p(q(null)),p(fe({parent:n.substr(1)})),g.push(n);case 11:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){b(),navigator.permissions.query({name:"geolocation"}).then((function(e){console.log(e),"granted"===e.state?(v(),p(ha({useLocation:!0})),p($e(!0)),p(nt())):"prompt"===e.state?a("We use geolocation on this site to provide better results and optimize your experience. Allow using GPS?"):(p(ha({useLocation:!1})),p($e(!1)),p(nt()),go())}))}),[]);var y=Eo.map((function(e){return r.a.createElement(Un.a,{icon:e.icon,value:e.url,key:e.index,component:c.b,to:e.url,classes:{root:h.Tab}})}));return r.a.createElement(Ia.a,null,f?r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center",className:h.Max},r.a.createElement(m.a,null)):r.a.createElement(d.a,{container:!0,direction:"column",justify:"flex-start",alignItems:"stretch",spacing:1,className:h.Container},r.a.createElement(qi,{header:(null===u||void 0===u?void 0:u.username)||o||Eo[0].label}),r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/chat",component:mo}),r.a.createElement(x.b,{path:"/profile",component:Ri}),r.a.createElement(x.b,{path:"/social",component:bo}),r.a.createElement(x.b,{path:"/",component:ii})),r.a.createElement(Dn.a,{className:h.AppBar,position:"static"},r.a.createElement(Vn.a,{value:(null===s||void 0===s?void 0:s.url)||"/",centered:!0,onChange:E},y))))})),xo=function(){var e=hn(),t=ea().notif,a=Object(n.useState)(""),i=Object(s.a)(a,2),o=i[0],c=i[1],l=Object(n.useState)(!1),u=Object(s.a)(l,2),m=u[0],f=u[1],p=Object(x.g)(),g=[{name:"email",type:"email",label:"Email",value:o,onValidate:function(e){f(e)},onChange:function(e){c(e.target.value)},rules:{helperText:"invalid email",rule:{minLength:3,maxLength:40,regex:/^([\w%+-.]+)@([\w-]+\.)+([\w]{2,})$/i}}}],h=[{component:"button",variant:"contained",type:"submit",text:"send restore password link",size:"large",disabled:!m,onClick:function(e){e.preventDefault();try{L.post("/reset",{email:o}),t("Check your email","info")}catch(e){t("Server error, please try again later","error")}}},{component:"button",text:"back to login",size:"large",onClick:function(){p.push("/login")}}];return r.a.createElement(d.a,{container:!0,direction:"column",alignItems:"center",justify:"center",className:e.SingleForm},r.a.createElement(en,{className:e.Form,inputs:g,buttons:h}))},Oo=a(372),jo=a(268),wo=a(165),ko=a.n(wo),Co=a(373),So=Object(f.a)((function(e){return{root:Object(gn.a)({},e.breakpoints.up("sm"),{minWidth:"344px !important"}),card:{display:"flex",width:"100%"},default:{backgroundColor:e.palette.grey[800]},prompt:{backgroundColor:e.palette.grey[800],width:550},info:{backgroundColor:e.palette.info.main},success:{backgroundColor:e.palette.success.main},warning:{backgroundColor:e.palette.warning.dark},error:{backgroundColor:e.palette.error.main},header:{display:"block",fontWeight:"bold",color:e.palette.common.white},actionRoot:{padding:"8px 8px 8px 26px"},close:{marginLeft:"auto !important",color:e.palette.common.white},text:{fontSize:"1rem",color:e.palette.common.white}}})),No=r.a.forwardRef((function(e,t){var a=e.id,n=So(),i=fo().getCurrentLocaion,o=Object(O.c)().closeSnackbar,c=Object(l.b)(),s=Object(l.c)((function(e){return e.snack.notifications})).find((function(e){return e.key===a})),u=Object(V.a)({},s),m=u.text,d=u.variant,f=u.header,p="prompt"===d;return r.a.createElement(O.a,{ref:t,className:n.root},r.a.createElement(qn.a,{className:fr()(n.card,n[d])},r.a.createElement(Oo.a,{classes:{root:n.actionRoot}},f&&r.a.createElement(La.a,{variant:"subtitle2",className:n.header},f,":"),m&&r.a.createElement(La.a,{variant:"body1",className:n.text},m)),p&&r.a.createElement(jo.a,{className:n.close,onClick:function(){c(ha({useLocation:!0})),c($e(!0)),c(nt({useLocation:!0})),i(),o(a)}},r.a.createElement(Co.a,{color:"inherit"})),r.a.createElement(jo.a,{className:n.close,onClick:function(){p&&(c(ha({useLocation:!1})),c($e(!1)),c(nt({useLocation:!1})),go()),o(a)}},r.a.createElement(ko.a,{color:"inherit"}))))})),To=[],Io=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.snack.notifications})),a=Object(O.c)(),r=a.enqueueSnackbar,i=a.closeSnackbar;return Object(n.useEffect)((function(){t.forEach((function(t){var a,n=t.key,o=t.text,c=t.options,l=void 0===c?{}:c,s=t.dismissed;void 0!==s&&s?i(n):To.includes(n)||(r(o,Object(V.a)(Object(V.a)({key:n},l),{},{onClose:function(e,t,a){l.onClose&&l.onClose(e,t,a)},onExited:function(t,a){var n;e(Xt({key:a})),n=a,To=To.filter((function(e){return n!==e}))}})),a=n,To=[].concat(Object(C.a)(To),[a]))}))}),[t,r,e,i]),null},Lo=Object(f.a)({root:{width:"100vw",height:"100vh"}}),Ao=function(){var e=Lo(),t=Object(x.g)(),a=Object(l.b)(),i=ea().notif,o=Object(x.h)();return Object(n.useEffect)((function(){try{console.log(o);var e=o.search.split("=")[1],n=L("email/verify?key=".concat(e));console.log(n.data),n.data.status?(a(ha({email:n.data.data.email})),a(Le({email:n.data.data.email})),i("Email successfully updated","success")):i("Email was not updated","error")}catch(r){}a(xa()),t.push("/")}),[]),r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center",className:e.root},"Validating your request, please wait")},Uo=Object(f.a)({Grid:{width:"100vw",height:"100vh"},root:{marginBottom:40}});var Do=function(){var e=Uo(),t=Object(l.b)(),a=Object(l.c)((function(e){return e.general})),i=a.isAuth,o=a.isLoading,c=Object(l.c)((function(e){return e.UI})).isInfoMissing,f=Object(n.useState)(r.a.createElement(m.a,null)),g=Object(s.a)(f,2),h=g[0],b=g[1];return Object(n.useEffect)((function(){t(xa())}),[]),Object(n.useEffect)((function(){b(o?r.a.createElement(d.a,{container:!0,justify:"center",alignItems:"center",className:e.Grid},r.a.createElement(m.a,null)):i&&c?r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/add",component:cn,exact:!0}),r.a.createElement(x.a,{from:"/",to:"/add"})):i?r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/reset",component:wi,exact:!0}),r.a.createElement(x.b,{path:"/email/verify",component:Ao,exact:!0}),r.a.createElement(x.a,{exact:!0,from:"/strangers",to:"/"}),r.a.createElement(x.a,{from:"/login",to:"/"}),r.a.createElement(x.b,{path:"/",component:yo})):r.a.createElement(x.d,null,r.a.createElement(x.b,{path:"/email/verify",component:Ao,exact:!0}),r.a.createElement(x.b,{path:"/login",component:bn,exact:!0}),r.a.createElement(x.b,{path:"/register",component:An,exact:!0}),r.a.createElement(x.b,{path:"/forgot",component:xo,exact:!0}),r.a.createElement(x.b,{path:"/reset",component:wi,exact:!0}),r.a.createElement(x.b,{path:"/"},r.a.createElement(x.a,{to:"/login"}))))}),[i,o,e.Grid,c]),r.a.createElement(p.a,{theme:y},r.a.createElement(O.b,{maxSnack:3,classes:{containerRoot:e.root},content:function(e){return r.a.createElement(No,{id:e})}},r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,null),h,r.a.createElement(Io,null))))},Vo=a(35),Mo=Object(Vo.d)({general:ka,login:pn,register:Ln,UI:be,filter:ke,additional:rt,users:Wt,chat:ae,snack:Qt,WS:qt}),Bo=a(84),Fo=Object(S.configureStore)({reducer:Mo,middleware:[Bo.a]});console.log=function(){},o.a.render(r.a.createElement(l.a,{store:Fo},r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,null,r.a.createElement(Do,null)))),document.getElementById("root"))},32:function(e,t,a){e.exports=a.p+"static/media/default-avatar.d2c893f5.png"}},[[184,1,2]]]);
//# sourceMappingURL=main.087c5d59.chunk.js.map